(this.webpackJsonprnnvis=this.webpackJsonprnnvis||[]).push([[0],{118:function(t,e,i){t.exports=i(135)},134:function(t,e,i){},135:function(t,e,i){"use strict";i.r(e);var a={};i.r(a),i.d(a,"toggleTraining",(function(){return P})),i.d(a,"stopTraining",(function(){return C})),i.d(a,"updateUI",(function(){return N})),i.d(a,"updateAppState",(function(){return D})),i.d(a,"updateNetwork",(function(){return W})),i.d(a,"updateTraining",(function(){return F})),i.d(a,"updateAlertSnack",(function(){return z})),i.d(a,"updateTextData",(function(){return M})),i.d(a,"updateCookiesState",(function(){return R}));var s=i(0),n=i.n(s),r=i(18),o=i.n(r),l=i(12),p=i(15),h=i(82),c=i(177),u=i(176),d=i(103),g=i(162),f=i(62),y=i(64),m=i(63),v=Object(d.a)({palette:{primary:{main:g.a[800],dark:g.a[900],light:g.a[700],off:g.a[400]},secondary:{main:f.a[500],dark:f.a[700],light:f.a[100],superLight:f.a[50],off:f.a[700]},overview:{main:y.a[500],light:y.a[300],dark:y.a[700]},detail:{main:m.a[500],light:m.a[300],dark:m.a[700]}}}),x=i(5),k=i(6),w=i(14),b=i(13),S=i(100),O=i(40),T=i(174),A=i(3),E=i(165),j=i(172),I=i(7);function P(t){return{type:"TOGGLE_TRAINING",training:t}}function C(t){return{type:"STOP_TRAINING",training:t}}function N(t){return{type:"UPDATE_UI",ui:t}}function D(t){return{type:"UPDATE_APP_STATE",appState:t}}function W(t){return{type:"UPDATE_NETWORK",network:t}}function F(t){return{type:"UPDATE_TRAINING",training:t}}function z(t){return{type:"UPDATE_ALERT_SNACK",alertSnack:t}}function M(t){return{type:"UPDATE_TEXT_DATA",textData:t}}function R(t){return{type:"UPDATE_COOKIES_STATE",cookiesState:t}}var _=function(t){return{fullWidth:{width:"100%"},panelWrapper:{height:"40vh",background:t.palette.secondary.light},smallPanelWrapper:{marginLeft:"20px",marginRight:"20px",height:"40vh"},oVheader:{background:t.palette.overview.main},cVheader:{background:t.palette.detail.main},typoStd:{color:"black",width:"100%",fontSize:"14px"},typoStdBig:{color:"black",width:"90%",margin:"5px",fontSize:"30px"},typoOv:{color:t.palette.overview.main,marginTop:"5px",fontSize:"18px",width:"auto"},typoOvOff:{color:t.palette.secondary.dark,marginTop:"5px",fontSize:"18px",width:"auto"},typoOvBig:{color:t.palette.overview.main,marginTop:"5px",fontSize:"24px"},typoCv:{color:t.palette.detail.main,marginTop:"5px",fontSize:"18px"},typoCvOff:{color:t.palette.secondary.dark,marginTop:"5px",fontSize:"18px"},typoCvSmall:{color:t.palette.detail.main,marginTop:"5px",fontSize:"16px"},typoCvOffSmall:{color:t.palette.secondary.dark,marginTop:"5px",fontSize:"16px"},typoCvBig:{color:t.palette.detail.main,marginTop:"5px",fontSize:"24px"},typoHeader:{color:"white",fontSize:"20px"},typoOvHighlighted:{color:t.palette.overview.main},typoCvHighlighted:{color:t.palette.detail.main},icon_cell:{color:t.palette.detail.main},icon_net:{color:t.palette.overview.main},button_cell:{margin:"10px",color:"white",borderRadius:"50%",background:t.palette.detail.main,"&:hover":{background:t.palette.detail.dark}},button_net:{margin:"10px",color:"white",borderRadius:"50%",background:t.palette.overview.main,"&:hover":{background:t.palette.overview.dark}},button_top:{color:"white"},text_button_net:{color:"white",margin:"10px",background:t.palette.overview.main,"&:hover":{background:t.palette.overview.dark}},text_button_cell:{color:"white",margin:"10px",background:t.palette.detail.main,"&:hover":{background:t.palette.detail.dark}},text_button_net_inverted:{background:"white",color:t.palette.overview.main,"&:hover":{background:"lightgrey"}},text_button_cell_inverted:{background:"white",color:t.palette.detail.main,"&:hover":{background:"lightgrey"}},defSlider:{width:"90%",marginLeft:"5%",marginRight:"5%",color:"black",marginTop:"5px"},select:{marginLeft:t.spacing(4),"&:before":{borderColor:"white"},"&:hover":{borderColor:"white"},"&:after":{borderColor:"white"},minWidth:120,color:"white",align:"left"},selectIcon:{fill:"white"}}},L=i(54),H=i.n(L),B=i(70),G=function(){self.addEventListener("message",(function(t){if(t)switch(t.data.cmd){case"init":importScripts("https://cdn.jsdelivr.net/npm/setimmediate@1.0.5/setImmediate.min.js"),importScripts("https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2.7/dist/tf.min.js"),tf.setBackend("cpu"),self.initializing=!0,self.initialize(),self.initializing=!1,postMessage({cmd:"init",values:{values:self.values,predictions:self.testOutputs}});break;case"text":self.textData=t.data.params.textData;break;case"fit":if(self.fitting)return;for(;self.generating||self.initializing;);self.fitting=!0,self.model.model.fit(self.mem[0].in,self.mem[0].out,{epochs:t.data.params.epochs,batchSize:t.data.params.batchSize}).then((function(e){self.fitting=!1,postMessage({cmd:"fit",reset:t.data.params.reset})}));break;case"data":self.generating=!0,self.generateDataWith(t.data.params),self.generating=!1,self.addDataToMemory(),postMessage({cmd:"data",values:{chartIn:self.chartDataInput,chartOut:self.chartDataOutput,chartPred:self.chartPredictionInput,values:self.testInput.length,predictions:self.testOutputs}});break;case"model":self.createModel(t.data.params);break;case"pred":if(self.predicting)return;for(;self.generating||self.initializing;);self.predicting=!0,postMessage({cmd:"pred",values:{pred:self.createPrediction(t.data.params.inputType)}}),self.predicting=!1}})),self.initialize=function(){self.model=void 0,self.mem=[],self.fitting=!1,self.predicting=!1,self.generating=!1},self.createModel=function(t){if("Text Data"===t.training.inputType){self.createComplexModel(20,self.textData.charSetSize,self.textData.charSetSize,t.layers,t.cells);var e=tf.train.rmsprop(t.learningRate);self.model.compile({loss:"categoricalCrossentropy",optimizer:e})}else{self.createComplexModel(self.values,1,1,t.layers,t.cells);var i=tf.train.rmsprop(t.learningRate);self.model.compile({loss:"meanSquaredError",optimizer:i})}},self.addDataToMemory=function(){var t={in:self.trainInput,out:self.trainOutput,pred:self.testInput};self.mem=[t]},self.createComplexModel=function(t,e,i,a,s){self.model=tf.sequential();for(var n=0;n<a;n++)self.model.add(tf.layers.lstm({units:s,returnSequences:n<a-1,inputShape:0===n?[t,e]:void 0}));return self.model.add(tf.layers.dense({units:i,activation:i>1?"softmax":"tanh"})),self.model},self.generateDataWith=function(t){"Text Data"===t.inputType?self.generateTextData(256):self.generateFunctionData(t.type,3,t.stepSize,t.size,t.noise)},self.createPrediction=function(t){var e,i,a,s=[],n=[];for(var r in self.testInput)n.push(self.testInput[r]);for(var o=0;o<self.testOutputs;o++){if(a=tf.tensor3d([n]),i=self.model.predict(a),e=Array.from(i.arraySync()),s.push(e[0]),"Text Data"===t)for(var l in e[0])({}).hasOwnProperty.call(e[0],l)&&(e[0][l]=Math.round(e[0][l]));n.splice(0,1),n.push(e[0])}return s},self.generateFunctionData=function(t,e,i,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(self.trainInputBuff=[],self.trainOutputBuff=[],self.testInputBuff=[],self.values=Math.round(e/i),self.testOutputs=2*Math.PI/i,self.stepSize=i,self.chartPredictionInput=[],self.chartDataInput=[],self.chartDataOutput=[],self.maxNoise=.2,void 0!==t&&0!==t.length){var n=a/t.length;self.trainData(i,n,t,s),self.testData(i,t,s)}},self.trainData=function(t,e,i,a){for(var s=2*Math.PI/e,n=2*Math.PI*Math.random(),r=0;r<e;r++){for(var o=[],l=r*s+n,p=0;p<self.values;p++){var h=-a+2*a*Math.random(),c=1;for(var u in i)c=c*self.dataFunc(l+p*t,i[u])+h;o.push([c])}self.trainInputBuff.push(o);var d=[],g=1;for(var f in i)g*=self.dataFunc(self.values*t+l,i[f]);d.push(g),self.trainOutputBuff.push(d)}self.trainInput=tf.tensor3d(self.trainInputBuff),self.trainOutput=tf.tensor2d(self.trainOutputBuff)},self.testData=function(t,e,i){for(var a=[],s=Math.random()*Math.PI,n=0;n<self.values;n++){var r=-i+2*i*Math.random(),o=1;for(var l in e)o=o*self.dataFunc(n*t+s,e[l])+r;a.push([o]),self.chartDataInput.push(o),self.chartPredictionInput.push(o)}self.testInputBuff.push(a);for(var p,h=[],c=0;c<self.testOutputs;c++){p=(self.values+c)*t;var u=1;for(var d in e)u*=self.dataFunc(p+s,e[d]);h.push(u),self.chartDataOutput.push(u)}self.chartDataInput.push(),self.chartPredictionInput.push(),self.testInput=a},self.dataFunc=function(t,e){var i=Math.sin(t);return"sinc"===e&&(i=(Math.sin(1.5*t)+Math.sin(4.5*t))/1.5),"saw"===e&&(i=t%Math.PI/Math.PI*2-1),"sqr"===e&&(i=Math.sin(Math.PI/2*t)>=0?1:-1),i},self.generateTextData=function(t){self.generateExampleBeginIndices(20),self.trainInputBuff=[],self.trainOutputBuff=[],self.testInputBuff=[],self.testOutputs=5,self.chartPredictionInput=[],self.chartDataInput=[],self.chartDataOutput=[],self.maxNoise=.2,self.textTrainData(t,20),self.textTestData(20)},self.textTrainData=function(t,e){for(var i=0;i<t;i++){for(var a=[],s=self.textData.exampleBeginIndices[self.textData.examplePosition%self.textData.exampleBeginIndices.length],n=0;n<e;n++){var r=self.textData.indices[s+n],o=new Array(self.textData.charSetSize).fill(0);o[r]=1,a.push(o)}self.trainInputBuff.push(a);var l=self.textData.indices[e+s],p=new Array(self.textData.charSetSize).fill(0);p[l]=1,self.trainOutputBuff.push(p),self.textData.examplePosition++}self.trainInput=tf.tensor3d(self.trainInputBuff),self.trainOutput=tf.tensor2d(self.trainOutputBuff)},self.textTestData=function(t){var e=0,i=[],a=self.textData.exampleBeginIndices[0];a+t+self.testOutputs>=self.textData.textLen&&(a-=self.textOutputs);for(var s=0;s<t;s++){e=self.textData.indices[s+a];var n=new Array(self.textData.charSetSize).fill(0);n[e]=1,i.push(n),self.chartDataInput.push(n),self.chartPredictionInput.push(n)}self.testInputBuff.push(i);for(var r,o=[],l=0;l<self.testOutputs;l++){r=t+l+a,e=self.textData.indices[r];var p=new Array(self.textData.charSetSize).fill(0);p[e]=1,o.push(p),self.chartDataOutput.push(p)}self.chartDataInput.push(),self.chartPredictionInput.push(),self.testInput=i},self.generateExampleBeginIndices=function(t){self.textData.exampleBeginIndices=[];for(var e=0;e<self.textData.textLen-t-1;e+=1)self.textData.exampleBeginIndices.push(e);tf.util.shuffle(self.textData.exampleBeginIndices),self.textData.examplePosition=0}},U=function t(e){Object(x.a)(this,t);var i=e.toString(),a=new Blob(["("+i+")()"]);return new Worker(URL.createObjectURL(a))},X=i(104),Y=function(){function t(e){Object(x.a)(this,t),this.textString=e,this.textLen=e.length,this.getCharSet(),this.convertAllTextToIndices()}return Object(k.a)(t,[{key:"textToIndices",value:function(t){for(var e=[],i=0;i<t.length;++i)e.push(this.charSet.indexOf(t[i]));return e}},{key:"getCharSet",value:function(){this.charSet=[];for(var t=0;t<this.textLen;++t)-1===this.charSet.indexOf(this.textString[t])&&this.charSet.push(this.textString[t]);this.charSetSize=this.charSet.length}},{key:"convertAllTextToIndices",value:function(){this.indices=new Uint16Array(this.textToIndices(this.textString))}},{key:"getFromCharSet",value:function(t){return this.charSet[t]}},{key:"getFromOneHot",value:function(t){if(Array.isArray(t)){var e=t.indexOf(Math.max.apply(Math,Object(X.a)(t))),i=this.getFromCharSet(e);return" "===i&&(i="\u2423"),i||""}return""}}]),t}(),q=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).onmessage=function(e){var i=e.data.values,a=t.props.network;switch(e.data.cmd){case"init":t.props.actions.updateTraining(Object(A.a)({},t.props.training,{values:i.values,predictions:i.predictions}));break;case"fit":t.props.training.running&&t.iterate(!0),t.props.actions.updateTraining(Object(A.a)({},t.props.training,{workerReady:!0}));break;case"data":a=t.addDataToNetwork(t.props.network,i.chartIn,i.chartOut,i.chartPred),t.props.actions.updateNetwork(a),t.props.actions.updateTraining(Object(A.a)({},t.props.training,{workerReady:!0,values:i.values,predictions:i.predictions}));break;case"pred":a=t.addPredictionToNetwork(t.props.network,i.pred),t.props.actions.updateNetwork(a)}},t}return Object(k.a)(i,[{key:"componentDidMount",value:function(){var t=Object(B.a)(H.a.mark((function t(){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.worker=new U(G),this.worker.onmessage=this.onmessage,this.worker.postMessage({cmd:"init",params:{type:this.props.training.dataTypes,noise:this.props.training.noise,size:this.props.training.dataSetSize,stepSize:this.props.training.stepSize}}),this.reset();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(t){var e=this;this.props.training.running!==t.training.running?this.props.training.running&&setTimeout((function(){e.iterate(!0)}),100):this.props.training.running&&this.props.ui.ready&&setTimeout((function(){e.iterate(!0)}),100),this.props.training.reset&&(this.reset(),this.props.actions.updateTraining(Object(A.a)({},this.props.training,{reset:!1,running:!1,workerReady:!1})),this.props.actions.updateUI(Object(A.a)({},this.props.ui,{reset:!0,ready:!0,running:!1,animStep:!1,netAnim:!1,lstmStep:0,trainingStep:0,state:[!0,!1,!1]}))),this.props.training.step&&(this.iterate(!1),this.props.actions.updateUI(Object(A.a)({},this.props.ui,{reset:!0,ready:!0,running:!1,animStep:!1,netAnim:!1,lstmStep:0,trainingStep:0,state:[!0,!1,!1]})),this.props.actions.updateTraining(Object(A.a)({},this.props.training,{reset:!1,step:!1,running:!1,workerReady:!this.props.ui.ready}))),this.props.ui.detail&&0===this.props.network.iteration&&e.iterate(!1)}},{key:"reset",value:function(){var t=this;if("Text Data"===this.props.training.inputType){var e="data/abab.txt";"lorem"===this.props.training.dataTypes[0]&&(e="data/lipsum.txt"),fetch(e).then((function(t){return t.text()})).then((function(e){var i=new Y(e);t.props.actions.updateTextData(i),t.worker.postMessage({cmd:"text",params:{textData:i}}),t.resetModel()}))}else this.resetModel()}},{key:"resetModel",value:function(){this.worker.postMessage({cmd:"model",params:{layers:this.props.network.layers,cells:this.props.network.layerSize,learningRate:this.props.network.learningRate,training:this.props.training}}),this.worker.postMessage({cmd:"data",params:{type:this.props.training.dataTypes,inputType:this.props.training.inputType,noise:this.props.training.noise,size:this.props.training.dataSetSize,stepSize:this.props.training.stepSize}}),this.worker.postMessage({cmd:"pred",params:{type:this.props.training.inputType}});var t=this.props.ui,e=this.props.network,i=Object(A.a)({},this.props.training,{workerReady:!1});e=Object(A.a)({},e,{iteration:0}),e=this.addDataToNetwork(e,[],[],[]),e=this.addPredictionToNetwork(e,[]),t=this.addDataToUI(t,e),this.props.actions.updateNetwork(e),this.props.actions.updateUI(t),this.props.actions.updateTraining(i)}},{key:"addDataToNetwork",value:function(t,e,i,a){var s={chartInput:e,chartOutput:i,chartPrediction:a};return Object(A.a)({},t,{data:s})}},{key:"addPredictionToNetwork",value:function(t,e){var i=t.data;return i.prediction=e,Object(A.a)({},t,{data:i})}},{key:"addDataToUI",value:function(t,e){var i=t.data;return i.pop(),i.unshift(e.data),i[2]=e.data,Object(A.a)({},t,{data:i})}},{key:"iterate",value:function(){var t=Object(B.a)(H.a.mark((function t(e){var i,a;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.props.network,!this.props.ui.ready){t.next=7;break}a=this.props.ui,a=this.addDataToUI(a,i),this.props.actions.updateUI(Object(A.a)({},a,{ready:!e,running:e})),t.next=8;break;case 7:return t.abrupt("return");case 8:this.props.actions.updateTraining(Object(A.a)({},this.props.training,{step:!1,ready:!1,workerReady:!1})),this.worker.postMessage({cmd:"data",params:{type:this.props.training.dataTypes,inputType:this.props.training.inputType,noise:this.props.training.noise,size:this.props.training.dataSetSize,stepSize:this.props.training.stepSize}}),this.worker.postMessage({cmd:"pred",params:{type:this.props.training.inputType}}),this.worker.postMessage({cmd:"fit",params:{epochs:1,batchSize:this.props.training.batchSize,reset:!1}}),i=Object(A.a)({},i,{iteration:this.props.network.iteration+1}),this.props.actions.updateNetwork(i);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){return null}}]),i}(n.a.Component);var V=Object(l.b)((function(t){return{network:t.network,training:t.training,ui:t.ui}}),(function(t){return{actions:Object(p.b)(a,t)}}))(q),K={ENG:{epoch:[[{type:"plain",text:"When training a Neural Network, a lot of data used to learn how to change the weights is fed into the network. This data is usually "},{type:"highlighted",text:"fed into the network in small batches."}],[{type:"plain",text:"Once all batches in the whole dataset have been processed, one "},{type:"highlighted",text:"epoch "},{type:"plain",text:"is finished. This means that the network has been trained on "},{type:"highlighted",text:"each item in the dataset once"},{type:"plain",text:"."}]],welcome:[[{type:"plain",text:"This application is designed so you can experiment with, and "},{type:"highlighted",text:"learn about recurrent neural networks "},{type:"plain",text:"(RNNs)."}],[{type:"plain",text:"In contrast to fully connected or convolutional neural networks, RNNs are designed to work with "},{type:"highlighted",text:"sequential data. "},{type:"plain",text:"Thus, they are used for tasks such as "},{type:"highlighted",text:"translation, image captioning, and next element prediction."}]],inputOnboarding:[[{type:"plain",text:"In this application, you can experiment with "},{type:"highlighted",text:"function and text data. "},{type:"plain",text:"Here on the left, you can select which dataset you want to "},{type:"highlighted",text:"train on."}]],networkOnboarding:[[{type:"plain",text:"This is the network that you can train. "},{type:"highlighted",text:"Feel free to modify it."}],[{type:"plain",text:"You can "},{type:"highlighted",text:"add layers by clicking the + between the layers "},{type:"plain",text:"and "},{type:"highlighted",text:"remove them by hovering and clicking the red x."}]],startTrainingOnboarding:[[{type:"plain",text:"Now, lets "},{type:"highlighted",text:"start the training by hitting the play button!"}],[{type:"plain",text:"If the network is paused, you can also advance individual epochs using the "},{type:"highlighted",text:"forward button."}]],outputOnboarding:[[{type:"plain",text:"To show how your network "},{type:"highlighted",text:"currently performs"},{type:"plain",text:", we visualize "},{type:"highlighted",text:"the prediction for a random dataset example"},{type:"plain",text:" in each epoch."}]],cellTransitionOnboarding:[[{type:"plain",text:"Now that we have trained the network for a while, lets look "},{type:"highlighted",text:"into one of these layers"},{type:"plain",text:". Clicking on one of them will show you the workings of a "},{type:"highlighted",text:"LSTM cell."}]],detailOutputOnboarding:[[{type:"plain",text:"In this plot, you can can see the cell build up its "},{type:"highlighted",text:"internal memory from the input values in the grey box."}],[{type:"plain",text:"The network then makes a prediction based on this "},{type:"highlighted",text:"internal state."}]],detailCellOnboarding:[[{type:"plain",text:"In this, more detailed view, the training progresses in "},{type:"highlighted",text:"slow-motion."}],[{type:"plain",text:"This is a LSTM cell, which is used throughout the network. To look into what "},{type:"highlighted",text:"individual components of this cell do"},{type:"plain",text:", simply click one of the compute elements, to get a "},{type:"highlighted",text:"detailed description."}]],processOnboarding:[[{type:"plain",text:"Here, you can see the "},{type:"highlighted",text:"processing steps"},{type:"plain",text:" of the network you are currently training."}]],slidersOnboarding:[[{type:"plain",text:"By interacting with these sliders, you can "},{type:"highlighted",text:"change even more training parameters"},{type:"plain",text:" and see in the network overivew, how "},{type:"highlighted",text:"the model reacts"},{type:"plain",text:" during training."}]],headingExplanation:[[{type:"plain",text:"To get more information of individual components of this app, "},{type:"highlighted",text:"simply click any \u24d8"},{type:"plain",text:" in this visualization."}],[{type:"plain",text:"Now, have fun "},{type:"highlighted",text:"exploring RNNs!"}]],learningRate:[[{type:"plain",text:"The learning rate specifies, "},{type:"highlighted",text:"how much the network weights are updated."}],[{type:"plain",text:"High learning rates mean, that the prediction error leads to "},{type:"highlighted",text:"bigger updates, "},{type:"plain",text:"changing the network a lot. In practice, this means, that the network learns faster. However, when the learning rate is too high, the network will overshoot, and "},{type:"highlighted",text:"never get to an optimal state."}],[{type:"plain",text:"If the learning rate is super low, the chance that the network finds the optimal solution is "},{type:"highlighted",text:"higher"},{type:"plain",text:", but it will learn much "},{type:"highlighted",text:"slower."}]],batchSize:[[{type:"plain",text:"If we would train on every item individually, training would "},{type:"highlighted",text:"take very long"},{type:"plain",text:". To circumvent this, we calculate the error for "},{type:"highlighted",text:"multiple dataset items simultaneously."}],[{type:"plain",text:"Here, you can set how many training items are "},{type:"highlighted",text:"combined in a so-called batch"},{type:"plain",text:". Weight updates are then made based on the error for the "},{type:"highlighted",text:"whole batch."}],[{type:"plain",text:"Larger batches "},{type:"highlighted",text:"speed up training"},{type:"plain",text:", but can lead to "},{type:"highlighted",text:"a loss of focus on individual training samples."}]],noise:[[{type:"plain",text:"If we only check if the net can recreate given functions we are prone to "},{type:"highlighted",text:"overfitting"},{type:"plain",text:". Meaning the network only works well on the specific data used in the training process."}],[{type:"plain",text:"In real world scenarios, measurements are almost "},{type:"highlighted",text:"never perfect"},{type:"plain",text:", and we want the network to generalize to "},{type:"highlighted",text:"unseen data."}],[{type:"plain",text:"To give the network a more challenging and realistic task, "},{type:"highlighted",text:"you can distort the input values"},{type:"plain",text:". The higher this noise is the harder it is for the network  to recognize the underlying function."}]],forward:[[{type:"plain",text:"To teach the network how to continue a sequence, one needs to first "},{type:"highlighted",text:"give the network data it can learn from."}],[{type:"plain",text:"The network then makes predictions based on this data, suggesting how it "},{type:"highlighted",text:"currently thinks, the sequence would continue."}]],validation:[[{type:"plain",text:"After a prediction is made on the training data, we can "},{type:"highlighted",text:"calculate the prediction error."}],[{type:"plain",text:"This is done by "},{type:"highlighted",text:"comparing the prediction with what would actually be correct"},{type:"plain",text:". This is also referred to as comparing the prediction to the "},{type:"highlighted",text:"ground truth."}],[{type:"plain",text:"This difference is then used as the "},{type:"highlighted",text:"loss"},{type:"plain",text:", which is important for the backward step."}]],backward:[[{type:"plain",text:"After making predictions and calculating the loss, the "},{type:"highlighted",text:"network weights get updated."}],[{type:"plain",text:"This is done by "},{type:"highlighted",text:"backpropagating the error through the network"},{type:"plain",text:", and for RNNs, also "},{type:"highlighted",text:"through time."}],[{type:"plain",text:"Here, the network learns, how weights for "},{type:"highlighted",text:"individual layers "},{type:"plain",text:"(backpropagation through network), but also for individual "},{type:"highlighted",text:"timesteps of the input function "},{type:"plain",text:"(backpropagation through time), should be changed to the predictions."}]],layerInputStep:[[{type:"plain",text:"To inform the gates of the cell about which information is relevant to be "},{type:"highlighted",text:"integrated into the cell state"},{type:"plain",text:", what aprt of the "},{type:"highlighted",text:"previous cell state can be forgotten"},{type:"plain",text:", and what part of the cell state is "},{type:"highlighted",text:"output as the cell activation, "},{type:"plain",text:"LSTM cells use both, the "},{type:"highlighted",text:"input to this cell"},{type:"plain",text:", and the "},{type:"highlighted",text:"activation of this cell from the previous time step."}],[{type:"plain",text:"This combined input information is referred to as the "},{type:"highlighted",text:"layer input."}]],gateStep:[[{type:"plain",text:"Using the information that is combined as the "},{type:"highlighted",text:"layer input"},{type:"plain",text:", all three gates use their own weights and biases to compute the "},{type:"highlighted",text:"gate activation"},{type:"plain",text:", which determines what part of information is used for updating the cell state and calculating the cell activation."}],[{type:"plain",text:"The "},{type:"highlighted",text:"input gate"},{type:"plain",text:" filters what part of the layer input is used to "},{type:"highlighted",text:"update the cell state"},{type:"plain",text:"with new information."}],[{type:"plain",text:"The "},{type:"highlighted",text:"forget gate"},{type:"plain",text:" filters what part of the "},{type:"highlighted",text:"cell state can be forgotten."}],[{type:"plain",text:"The "},{type:"highlighted",text:"output gate"},{type:"plain",text:" filters what part of the cell state is used to "},{type:"highlighted",text:"compute the cell activation."}]],updateStep:[[{type:"plain",text:"Using the filters of the input gate and the forget gate, the cell state is updated with "},{type:"highlighted",text:"a mix of new information and information from the old cell state."}],[{type:"plain",text:"The "},{type:"highlighted",text:"input gate"},{type:"plain",text:" is used in combination with the "},{type:"highlighted",text:"layer input"},{type:"plain",text:" to determine what new information gets added to the cell state."}],[{type:"plain",text:"The "},{type:"highlighted",text:"forget gate"},{type:"plain",text:" is used in combination with the "},{type:"highlighted",text:"previous cell state"},{type:"plain",text:" to determine what information from the previous cell state can be forgotten."}]],outputStep:[[{type:"plain",text:"Finally, the cell needs to output an "},{type:"highlighted",text:"activation value"},{type:"plain",text:", which can be used as "},{type:"highlighted",text:"an input to the next cell, or as a prediction output."},{type:"plain",text:"It is also used "},{type:"highlighted",text:"recurrently"},{type:"plain",text:" as an input to this cell for the next time step."}],[{type:"plain",text:"The activation is computed as "},{type:"highlighted",text:"filtered information"},{type:"plain",text:" from the cell state. Here, the "},{type:"highlighted",text:"output gate"},{type:"plain",text:" is used for this filtering."}]],layerInput:[[{type:"plain",text:"For informing all the gates, "},{type:"highlighted",text:"both, the current input to the cell "},{type:"plain",text:"and "},{type:"highlighted",text:"the activation of the previous timestep "},{type:"plain",text:"are needed."}]],inputGate:[[{type:"plain",text:"The input gate is used as a measure for "},{type:"highlighted",text:"what part of the input is used for updating the cell state "},{type:"plain",text:"with new information."},{type:"formulas",formulas:["i^t = sigmoid(W_{ix}x^t + W_{ia}a^{t-1} + b_i)"]}],[{type:"plain",text:"It is used to calculate the "},{type:"highlighted",text:"filtered input "},{type:"plain",text:"to update the internal cell state."},{type:"formulas",formulas:["\\text{filtered_input} = i^t \\circ tanh(W_{cx}x^t + W_{ca}a^{t-1} + b_c)"]}],[{type:"plain",text:""}],[{type:"plain",text:""}],[{type:"plain",text:"Symbols:"},{type:"formulas",formulas:["i^t: \\text{the input gate}","x^t: \\text{the input from the previous cell at time step t}","a^{t-1}: \\text{the activation of this cell from the previous time step}","W: \\text{trainable weight parameters}","b: \\text{trainable bias parameters}"]}]],forgetGate:[[{type:"plain",text:"The forget gate determines "},{type:"highlighted",text:"what part of the old cell state can be forgotten."},{type:"formulas",formulas:["f^t = sigmoid(W_{fx}x^t + W_{fa}a^{t-1} + b_f)"]}],[{type:"plain",text:"It is used to calculate the "},{type:"highlighted",text:"filtered state "},{type:"plain",text:"to update the internal cell."},{type:"formulas",formulas:["\\text{filtered_state} = f^t \\circ c^{t-1}"]}],[{type:"plain",text:""}],[{type:"plain",text:""}],[{type:"plain",text:"Symbols:"},{type:"formulas",formulas:["f^t: \\text{the forget gate}","x^t: \\text{the input from the previous cell at time step t}","a^{t-1}: \\text{the activation of this cell from the previous time step}","c^{t-1}: \\text{the cell state from the previous time step}","W: \\text{trainable weight parameters}","b: \\text{trainable bias parameters}"]}]],outputGate:[[{type:"plain",text:"The output gate is responsible for filtering "},{type:"highlighted",text:"what part of the current cell state is used as the output activation "},{type:"plain",text:"of the cell."},{type:"formulas",formulas:["o^t = sigmoid(W_{ox}x^t + W_{oa}a^{t-1} + b_o)"]}],[{type:"plain",text:"Using the output gate, one can then "},{type:"highlighted",text:"compute the cell activation"},{type:"plain",text:", which is used as input to the next cell, as well as recurrently in the same cell at the next time step."},{type:"formulas",formulas:["a^t = o^t \\circ tanh(c^t)"]}],[{type:"plain",text:""}],[{type:"plain",text:""}],[{type:"plain",text:"Symbols:"},{type:"formulas",formulas:["o^t: \\text{the output gate}","a^t: \\text{the activation of this cell for the current timestep}","x^t: \\text{the input from the previous cell at time step t}","a^{t-1}: \\text{the activation of this cell from the previous time step}","c^{t}: \\text{the current cell state}","W: \\text{trainable weight parameters}","b: \\text{trainable bias parameters}"]}]],stateUpdate:[[{type:"plain",text:"To update the cell state, "},{type:"highlighted",text:"the filtered input "},{type:"plain",text:"is combined with "},{type:"highlighted",text:"the filtered state "},{type:"plain",text:"of the previous time step."}]],memoryCell:[[{type:"plain",text:"The "},{type:"highlighted",text:"cell state "},{type:"plain",text:"is the heart of any LSTM cell. By having a cell state, and deciding how to update it based on "},{type:"highlighted",text:"the filtered input and previous state"},{type:"plain",text:", LSTM cells are able to "},{type:"highlighted",text:"capture long-term dependencies."},{type:"formulas",formulas:["c^t = \\text{filtered_input} + \\text{filtered_state}"]}],[{type:"plain",text:""}],[{type:"plain",text:""}],[{type:"plain",text:"Symbols:"},{type:"formulas",formulas:["c^t: \\text{the cell state at timestep t}"]}]],inputHeading:[[{type:"plain",text:"The input to a recurrent neural network can be "},{type:"highlighted",text:"sequential data."},{type:"plain",text:" We use "},{type:"highlighted",text:"periodic functions "},{type:"plain",text:"and "},{type:"highlighted",text:"simple text snippets "},{type:"plain",text:"to illustrate this."}],[{type:"plain",text:"For other tasks, such as "},{type:"highlighted",text:"image captioning"},{type:"plain",text:", which does not include sequential input data, the network only gets an input value for the first time step, and then has to "},{type:"highlighted",text:"recurrently build a caption "},{type:"plain",text:"by outputting one word at a time, which, again, makes it a "},{type:"highlighted",text:"sequential task."}],[{type:"plain",text:"This way, recurrent neural networks can be used for tasks with "},{type:"highlighted",text:"sequential input and non-sequential output (many-to-one)"},{type:"plain",text:", such as next element prediction. Tasks with "},{type:"highlighted",text:"sequential input and sequential output (many-to-many)"},{type:"plain",text:", such as translation. As well as tasks with "},{type:"highlighted",text:" non-sequential input and sequential output (one-to-many)"},{type:"plain",text:", such as image captioning."}],[{type:"plain",text:"As the general concepts for these tasks does not differ, we focus on "},{type:"highlighted",text:"next element prediction"},{type:"plain",text:" in this application, which is a many-to-one task."}]],networkHeading:[[{type:"plain",text:"a recurrent neural network is built up in a similar way as convolutional or fully connected neural networks, where "},{type:"highlighted",text:"multiple layers"},{type:"plain",text:" are connected to extract information from the input."}],[{type:"plain",text:"The great speciality of recurrent neural networks is, that they also use "},{type:"highlighted",text:"information from previous time steps"},{type:"plain",text:" for their predictions."},{type:"plain",text:" This is visualized by the loops in their network glyphs."}],[{type:"plain",text:"To achieve this, they have weights not only for how information is processed throughout layers, but also for how "},{type:"highlighted",text:"information from previous time steps"},{type:"plain",text:" is processed."}],[{type:"plain",text:"During trianing, this means that the error is not only backpropagated through the layers, but also "},{type:"highlighted",text:"through time"},{type:"plain",text:", to update the weights responsible for determining how information from previous time steps is processed."}],[{type:"plain",text:"This can be thought of as the error "},{type:"highlighted",text:"flowing backwards through the loops"},{type:"plain",text:" in the network, as well as through the lines connecting the layers."}]],predictionHeading:[[{type:"plain",text:"The prediction visualization shows how the network performs on a "},{type:"highlighted",text:"random example "},{type:"plain",text:"from the dataset."}],[{type:"plain",text:"The "},{type:"highlighted",text:"grey area"},{type:"plain",text:" shows, how many previous data points the network needs for "},{type:"highlighted",text:"building up its internal state"},{type:"plain",text:". The network will then make a prediction after these inputs have been processed."}],[{type:"plain",text:"The "},{type:"highlighted",text:"prediction accuracy"},{type:"plain",text:" will normally get "},{type:"highlighted",text:"worse for later predictions"},{type:"plain",text:". This comes from the fact, that the network first builds its internal state from "},{type:"highlighted",text:"training data"},{type:"plain",text:", whereas later, it needs to obtain its internal state from "},{type:"highlighted",text:"previous predictions."}]],cellHeading:[[{type:"plain",text:"A LSTM (long short-term memory) cell consists of "},{type:"highlighted",text:"different gates"},{type:"plain",text:", that determine what information is used to update its internal "},{type:"highlighted",text:"cell state"},{type:"plain",text:", and what information within this cell state is used to calculate the "},{type:"highlighted",text:"output activation."}],[{type:"plain",text:"To learn more about the gates and memory of this cell, "},{type:"highlighted",text:"click on one of the elements"},{type:"plain",text:" in this visualization."}]],cellPlotHeading:[[{type:"plain",text:"The network first builds up its internal state, visualized by the "},{type:"highlighted",text:"grey box"},{type:"plain",text:", before making a prediction."}],[{type:"plain",text:"This prediction is then used, to "},{type:"highlighted",text:"calculate the loss."}],[{type:"plain",text:"To make further predictions, as when generating text or continuing a function, one can feed the network "},{type:"highlighted",text:"its own prediction values"},{type:"plain",text:", to again build up the internal state with the "},{type:"highlighted",text:"same number of time steps"},{type:"plain",text:" as at the beginning, where known datapoints were used."}]]}},J={ENG:{title:"exploRNN",strings:{controlsTitle:"Controls",lossTitle:"Error",plotInput:"Input",plotOutput:"Target",plotPrediction:"Prediction",tooltipCell:"click for detail",tooltipDelete:"remove layer",tooltipAdd:"add layer",dataExplanation:"A random \ud83c\udfb2 element of the dataset\nis shown for each epoch.",backpropExplanation:"A series of predictions is shown, however,\nfor backpropagation, only the first prediction is considered.",epoch:{title:"Epochs \u24d8",description:K.ENG.epoch},onboarding:{welcome:{title:"Welcome to exploRNN!",description:K.ENG.welcome,buttonTitles:{skip:"Skip Intro",next:"Next"},arrow:"none",style:{position:"absolute",top:" 300px",left:"calc(50% - 250px)"}},input:{title:"Training Input",description:K.ENG.inputOnboarding,buttonTitles:{skip:"Skip Intro",next:"Next"},arrow:"left",style:{position:"absolute",top:" 200px",left:"10%"}},network:{title:"Network",description:K.ENG.networkOnboarding,buttonTitles:{skip:"Skip Intro",next:"Next"},arrow:"up",style:{position:"absolute",top:"calc(100% - 45vh)",left:"calc(35% - 250px)"}},startTraining:{title:"Start Training",description:K.ENG.startTrainingOnboarding,buttonTitles:{skip:"Skip Intro",next:"Lets Go!"},arrow:"down",style:{position:"absolute",bottom:"26vh",left:"calc(50% - 250px)"}},output:{title:"Validation",description:K.ENG.outputOnboarding,buttonTitles:{skip:"Skip Intro",next:"Ok"},arrow:"right",style:{position:"absolute",top:"200px",left:"calc(60% - 535px)"}},cellTransition:{title:"LSTM Cells",description:K.ENG.cellTransitionOnboarding,buttonTitles:{skip:"Skip Intro",next:"Sure!"},arrow:"up",style:{position:"absolute",top:"calc(100% - 45vh)",left:"calc(35% - 250px)"}},detailOutput:{title:"Data Processing per Cell",description:K.ENG.detailOutputOnboarding,buttonTitles:{skip:"Skip Intro",next:"Ok"},arrow:"right",style:{position:"absolute",top:"200px",left:"calc(50% - 535px)"}},detailCell:{title:"Cell Components",description:K.ENG.detailCellOnboarding,buttonTitles:{skip:"Skip Intro",next:"Nice!"},arrow:"left",style:{position:"absolute",top:"200px",left:"50%"}},detailProcess:{title:"Process",description:K.ENG.processOnboarding,buttonTitles:{skip:"Skip Intro",next:"Ok"},arrow:"down",style:{position:"absolute",bottom:"40vh",left:"calc(21% - 250px)"}},sliders:{title:"Sliders",description:K.ENG.slidersOnboarding,buttonTitles:{skip:"Skip Intro",next:"Ok"},arrow:"down",style:{position:"absolute",bottom:"40vh",left:"calc(79% - 250px)"}},headingExplanation:{title:"Explore",description:K.ENG.headingExplanation,buttonTitles:{skip:"Skip Intro",next:"Explore"},arrow:"none",style:{position:"absolute",top:" 300px",left:"calc(50% - 250px)"}}},trainSteps:[{id:0,title:"Forward \u24d8",description:"Data is shown to the network value by value to build up the internal state. After a fixed number of data points has been processed, the network can make a prediction on how this sample would continue.",longDescription:K.ENG.forward},{id:1,title:"Validation \u24d8",description:"The predicted values are compared to the correct values (ground truth) from the training dataset. The difference is used to calculate the loss.",longDescription:K.ENG.validation},{id:2,title:"Backward \u24d8",description:"The calculated loss is backpropagated through the network as well as through time (reverting the input timesteps), to find out where the prediction error came from and update the network variables for the next iteration.",longDescription:K.ENG.backward}],lstmSteps:[{id:0,title:"Layer Input \u24d8",description:"The inputs from the previous layer is combined with the output of this layer from the last time step. The layer input is then used in all gates.",longDescription:K.ENG.layerInputStep},{id:1,title:"Gate Activation \u24d8",description:"All gates are using the layer input to determine what information should be use to update the cell state with, and what part of the cell state should be output from this cell.",longDescription:K.ENG.gateStep},{id:2,title:"Cell Update \u24d8",description:"The input gate filters the layer input to update the cell state, whereas the forget gate determines what old cell state values should be forgotten.",longDescription:K.ENG.updateStep},{id:3,title:"Output \u24d8",description:"The cell state is filtered by the output gate to compute the output activation and send it as a input to the next layer.",longDescription:K.ENG.outputStep}],headings:[{id:1,identifier:"input",title:"Input \u24d8",description:K.ENG.inputHeading},{id:2,identifier:"network",title:"Network \u24d8",description:K.ENG.networkHeading},{id:3,identifier:"prediction",title:"Prediction \u24d8",description:K.ENG.predictionHeading},{id:4,identifier:"cell",title:"LSTM Cell \u24d8",description:K.ENG.cellHeading},{id:5,identifier:"cellPlot",title:"Network Data \u24d8",description:K.ENG.cellPlotHeading}],lstmGates:[{id:0,title:"Layer Input",description:K.ENG.layerInput},{id:1,title:"Input Gate",description:K.ENG.inputGate},{id:2,title:"Forget Gate",description:K.ENG.forgetGate},{id:3,title:"Output Gate",description:K.ENG.outputGate},{id:4,title:"State Update",description:K.ENG.stateUpdate},{id:5,title:"Memory Cell",description:K.ENG.memoryCell}]},types:[{name:"RNN",disabled:!0},{name:"LSTM",disabled:!1},{name:"GRU",disabled:!0}],inputTypes:[{name:"Text Data",disabled:!1},{name:"Function Data",disabled:!1}],languages:[{name:"ENG"},{name:"GER"}],fontSize:{small:14,default:16,title:18,header:20},sliders:[{key:0,title:"Learning Rate \u24d8",description:K.ENG.learningRate,step:.01,min:-3,max:1,marks:[{value:-3,label:1e-4},{value:-2,label:.001},{value:-1,label:.01},{value:0,label:.1},{value:1,label:1}]},{key:1,title:"Batch Size \u24d8",description:K.ENG.batchSize,step:1,min:5,max:50,marks:[{value:5,label:"5"},{value:25,label:"25"},{value:50,label:"50"}]},{key:2,title:"Noise \u24d8",description:K.ENG.noise,step:.01,min:0,max:.4,marks:[{value:0,label:"0.0"},{value:.2,label:"0.2"},{value:.4,label:"0.4"}]}]}},Q=i(182),$=i(167),Z=i(168),tt=i(106),et=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){return Object(x.a)(this,i),e.apply(this,arguments)}return Object(k.a)(i,[{key:"render",value:function(){var t="";return"highlighted"===this.props.descriptionItem.type&&(t=this.props.ui.detail?this.props.classes.typoCvHighlighted:this.props.classes.typoOvHighlighted),n.a.createElement(tt.a,{display:"inline",className:t},this.props.descriptionItem.text)}}]),i}(n.a.Component);var it=Object(l.b)((function(t,e){return{ui:t.ui}}))(Object(I.a)(_)(et)),at=i(71),st=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){return Object(x.a)(this,i),e.apply(this,arguments)}return Object(k.a)(i,[{key:"render",value:function(){return n.a.createElement(at.Context,{input:"tex",options:{displayAlign:"left"}},n.a.createElement("span",null,this.props.formulas.map((function(t){return n.a.createElement(at.Node,{key:t},t)}))))}}]),i}(n.a.Component);var nt=Object(l.b)((function(t,e){return{ui:t.ui}}))(st),rt=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){return Object(x.a)(this,i),e.apply(this,arguments)}return Object(k.a)(i,[{key:"render",value:function(){return n.a.createElement(E.a,{item:!0,style:{width:"100%"}},this.props.descriptionElement.map((function(t,e){return"formulas"!==t.type?n.a.createElement(it,{key:e,descriptionItem:t}):n.a.createElement(nt,{key:e,formulas:t.formulas})})))}}]),i}(n.a.Component);var ot=Object(l.b)((function(t,e){return{ui:t.ui}}))(rt),lt=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){return Object(x.a)(this,i),e.apply(this,arguments)}return Object(k.a)(i,[{key:"render",value:function(){return n.a.createElement(Q.a,{onClose:this.props.closeFunction,open:this.props.open},n.a.createElement($.a,null,this.props.title),n.a.createElement(Z.a,{dividers:!0},n.a.createElement(E.a,{container:!0,directiton:"column",spacing:2},this.props.description.map((function(t,e){return n.a.createElement(ot,{key:e,descriptionElement:t})})))))}}]),i}(n.a.Component);var pt=Object(l.b)((function(t,e){return{ui:t.ui}}))(lt),ht=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).handleClose=function(){t.props.actions.updateAppState(Object(A.a)({},t.props.appState,{cellDialog:[!1,!1,!1,!1,!1,!1]}))},t}return Object(k.a)(i,[{key:"render",value:function(){var t=this,e=J[this.props.appState.language];return n.a.createElement("div",null,e.strings.lstmGates.map((function(e){return n.a.createElement(pt,{key:e.id,closeFunction:t.handleClose,open:t.props.appState.cellDialog[e.id],title:e.title,description:e.description})})))}}]),i}(n.a.Component);var ct=Object(l.b)((function(t,e){return{network:t.network,training:t.training,ui:t.ui,appState:t.appState}}),(function(t){return{actions:Object(p.b)(a,t)}}))(ht),ut=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).handleClose=function(){t.props.actions.updateAppState(Object(A.a)({},t.props.appState,{headingDialog:""}))},t}return Object(k.a)(i,[{key:"render",value:function(){var t=this,e=J[this.props.appState.language];return n.a.createElement("div",null,e.strings.headings.map((function(e){return n.a.createElement(pt,{key:e.id,closeFunction:t.handleClose,open:t.props.appState.headingDialog===e.identifier,title:e.title,description:e.description})})))}}]),i}(n.a.Component);var dt=Object(l.b)((function(t,e){return{network:t.network,training:t.training,ui:t.ui,appState:t.appState}}),(function(t){return{actions:Object(p.b)(a,t)}}))(ut),gt=i(9),ft=function(){function t(e,i,a,s){Object(x.a)(this,t),this.s=e,this.active=!1,this.hover=!1,this.clicked=!1,this.x=i,this.y=a,this.width=0,this.height=0,this.dialog=s}return Object(k.a)(t,[{key:"draw",value:function(t){var e=this.s;e.push(),e.textAlign(e.LEFT,e.CENTER),e.textSize(e.typography.fontsizelarge),e.fill(e.colors.darkgrey),e.noStroke(),e.text(t,this.x,this.y),this.width=e.textWidth(t),this.height=e.textSize(t),this.hover&&(e.cursor(e.HAND),e.noFill(),e.stroke(e.colors.darkgrey),e.strokeWeight(1),e.line(this.x,this.y+this.height/2-2,this.x+this.width,this.y+this.height/2-2)),e.pop()}},{key:"mouseMoved",value:function(t,e){t>this.x&&t<this.x+this.width&&e>this.y-this.height/2&&e<this.y+this.height/2?this.hover=!0:this.hover=!1}},{key:"checkClick",value:function(){return this.hover?(this.s.props.actions.updateAppState(Object(A.a)({},this.s.props.appState,{headingDialog:this.dialog})),!0):(this.hover=!1,!1)}}]),t}(),yt=function(){function t(e,i,a){Object(x.a)(this,t),this.verts=e,this.next=i,this.s=a,this.active=!1,this.negativeActivation=!1,this.hover=!1,this.activeInputs=0}return Object(k.a)(t,[{key:"draw",value:function(){var t=this.s;t.noFill(),t.stroke(t.colors.grey),t.strokeWeight(1),this.active?(t.stroke(t.colors.detail),t.strokeWeight(4),t.drawingContext.lineDashOffset=-t.frameCount/2,t.drawingContext.setLineDash([10,10])):t.cellAnim.back&&this.negativeActivation&&(t.stroke(t.colors.detail),t.strokeWeight(4),t.drawingContext.lineDashOffset=t.frameCount/2,t.drawingContext.setLineDash([10,10])),this.hover&&(t.stroke(t.colors.detaillight),t.drawingContext.lineDashOffset=-t.frameCount/2,t.drawingContext.setLineDash([10,10])),t.strokeJoin(t.ROUND),t.beginShape();var e,i=Object(gt.a)(this.verts);try{for(i.s();!(e=i.n()).done;){var a=e.value;t.vertex(a.x,a.y)}}catch(s){i.e(s)}finally{i.f()}t.endShape(),t.drawingContext.setLineDash([])}},{key:"addActiveInput",value:function(){this.activeInputs+=1}},{key:"addNegativeInput",value:function(){this.negativeActivation=!0}},{key:"deactivate",value:function(){this.active=!1,this.negativeActivation=!1,this.activeInputs=0}},{key:"sendActivations",value:function(){if(this.active&&this.next&&this.next.length>0){var t,e=Object(gt.a)(this.next);try{for(e.s();!(t=e.n()).done;){t.value.addActiveInput()}}catch(i){e.e(i)}finally{e.f()}}}},{key:"updateActivation",value:function(){this.active?(this.active=!1,this.activeInputs=0):0!==this.activeInputs&&(this.active=!0)}}]),t}(),mt=function(){function t(e,i,a,s,n,r,o){switch(Object(x.a)(this,t),this.s=e.s,this.type=i,this.cell=e,this.x=e.left+a*e.horBuf,this.y=e.top+s*e.verBuf,this.step=r,this.id=o,this.hover=!1,this.clicked=!1,this.active=!1,this.negativeActivation=!1,this.connections=[],this.maxIngoingConnections=n,this.currentActivatedConnecions=0,i){case"fst":case"lst":case"sav":case"rec":this.r=e.width/20;break;case"glt":case"gft":this.r=e.width/30;break;case"crs":this.r=e.width/50;break;default:this.r=e.width/10}}return Object(k.a)(t,[{key:"draw",value:function(){var t=this.s,e=this.r,i=.6*this.r;(this.active||t.cellAnim.back&&this.negativeActivation)&&(e=1.2*this.r,i=.6*this.r*1.2),this.s.fill(t.colors.lightgrey),"gft"!==this.type&&"glt"!==this.type||this.s.fill(t.colors.grey),this.s.noStroke(),(this.active||t.cellAnim.back&&this.negativeActivation||0!==this.currentActivatedConnecions)&&t.fill(t.colors.detail),this.hover&&"fst"!==this.type&&"lst"!==this.type&&"crs"!==this.type&&"gft"!==this.type&&"glt"!==this.type&&(t.fill(t.colors.detaillight),t.cursor(t.HAND));var a=t.clickedBlock,s=!!a&&1!==a.i,n=!!a&&a.i!==a.layers;if("gft"===this.type&&s||"glt"===this.type&&n){var r=.05*t.width,o=.8*r;t.noStroke(),this.active||t.cellAnim.back&&this.negativeActivation?t.fill(t.colors.detail):t.fill(t.colors.darkgrey),t.rect(this.x,this.y,r,o),t.noStroke(),t.fill(t.colors.white);for(var l=this.x-r/2,p=this.y-o/2,h=0;h<5;h++)t.ellipse(l+(h+1)*r/6,p+o/3,r/(0===h||2===h?20:10));t.rect(l+3*r/6,p+2*o/3,r/10,r/10)}else"cel"===this.type?this.s.rect(this.x,this.y,e,e):this.s.ellipse(this.x,this.y,e);switch(this.type){case"rec":this.s.image(this.s.receive,this.x,this.y,2*i,2*i);break;case"add":this.s.image(this.s.add,this.x,this.y,i,i);break;case"sav":this.s.image(this.s.save,this.x,this.y,2*i,2*i);break;case"los":this.s.image(this.s.forget,this.x,this.y,i,i);break;case"cel":this.s.image(this.s.cellImage,this.x,this.y,i,i);break;case"out":this.s.image(this.s.output,this.x,this.y,i,i)}this.hover&&"fst"!==this.type&&"lst"!==this.type&&"crs"!==this.type&&"gft"!==this.type&&"glt"!==this.type&&(t.textAlign(t.CENTER,t.CENTER),t.fill(0,150),t.rect(t.mx,t.my+t.typography.tooltipoffset,110,30),t.fill(255),t.text(this.s.global.strings.lstmGates[this.id].title,t.mx,t.my+t.typography.tooltipoffset)),t.stroke(t.colors.lightgrey),t.strokeWeight(2),t.line(t.detailProps.right,0,t.detailProps.right,t.detailProps.height)}},{key:"addActiveInput",value:function(){this.currentActivatedConnecions+=1}},{key:"addNegativeInput",value:function(){this.negativeActivation=!0}},{key:"deactivate",value:function(){this.active=!1,this.negativeActivation=!1,this.currentActivatedConnecions=0}},{key:"sendActivations",value:function(){var t=this.s;if(this.active&&this.connections&&this.connections.length>0){"glt"===this.type&&(t.cellAnim.inputStep++,t.cellAnim.inputStep===this.s.props.training.values&&(t.cellAnim.inputStep=0,t.cellAnim.predictionStep++,t.cellAnim.predictionStep>=this.s.props.training.predictions&&(t.cellAnim.predictionStep=0,t.cellAnim.error=!0,t.cellAnim.forward=!1,this.s.props=Object(A.a)({},this.s.props,{ui:Object(A.a)({},this.s.props.ui,{state:[!1,!0,!1]})}))));var e,i=Object(gt.a)(this.connections);try{for(i.s();!(e=i.n()).done;){var a=e.value;a&&a.addActiveInput()}}catch(s){i.e(s)}finally{i.f()}}}},{key:"updateActivation",value:function(){var t=this.s;this.active?(this.active=!1,this.currentActivatedConnecions=0):this.currentActivatedConnecions>=this.maxIngoingConnections&&(this.active=!0,this.step>=0&&(this.s.props=Object(A.a)({},this.s.props,{ui:Object(A.a)({},this.s.props.ui,{lstmStep:this.step})})),"gft"===this.type?t.cellAnim.step=0:t.cellAnim.step++)}},{key:"mouseMoved",value:function(t,e){this.s.dist(t,e,this.x,this.y)<this.r/2?this.hover=!0:this.hover=!1,"gft"!==this.type&&"glt"!==this.type||(this.hover=!1);var i,a=Object(gt.a)(this.connections);try{for(a.s();!(i=a.n()).done;){i.value.hover=this.hover}}catch(s){a.e(s)}finally{a.f()}}},{key:"checkClick",value:function(){if(this.hover){this.s.clickedItem=this;var t=[!1,!1,!1,!1,!1,!1];t[this.id]=!0,this.s.props.actions.updateAppState(Object(A.a)({},this.s.props.appState,{cellDialog:t}))}return this.clicked=this.hover}}]),t}(),vt=function(){function t(e,i,a){Object(x.a)(this,t),this.s=e,this.items=[],this.connections=[],this.hasPrev=i,this.hasNext=a,this.height=e.detailProps.height*e.detailProps.verRatio,this.width=e.detailProps.width*e.detailProps.horRatio;var s=e.detailProps.left+(1-e.detailProps.horRatio)*e.detailProps.width/2,n=(1-e.detailProps.verRatio)*e.detailProps.height/2,r=1/6*this.width,o=1/3*this.height;e.clickedItem=void 0;var l={s:e,hasPrev:i,hasNext:a,horBuf:r,verBuf:o,left:s,top:n,height:this.height,width:this.width};this.items.push(this.receive=new mt(l,"rec",1,1,2,0,0)),this.items.push(this.add=new mt(l,"add",2,1,1,2,1)),this.items.push(this.save=new mt(l,"sav",3,1,2,2,4)),this.items.push(this.forget=new mt(l,"los",4,1,2,1,2)),this.items.push(this.output=new mt(l,"out",5,1,2,3,3)),this.items.push(this.cell=new mt(l,"cel",3,2,1,2,5)),this.items.push(this.crossInput=new mt(l,"crs",2,.5,1,-1)),this.items.push(this.crossForget=new mt(l,"crs",4,.5,1,-1)),this.items.push(this.crossOutput=new mt(l,"crs",5,.5,1,-1)),this.items.push(this.crossCell=new mt(l,"crs",4.5,1,1,-1)),this.items.push(this.ghostFirst=new mt(l,"gft",-1,1,1,0)),this.items.push(this.ghostLast=new mt(l,"glt",7,1,1,0)),this.connections.push(this.ghostInput=new yt([{x:this.ghostFirst.x,y:this.ghostFirst.y},{x:this.receive.x,y:this.receive.y}],[this.receive],e)),this.connections.push(this.bus=new yt([{x:this.receive.x,y:this.receive.y},{x:this.receive.x,y:this.crossOutput.y},{x:this.crossOutput.x,y:this.crossOutput.y}],[],e)),this.connections.push(this.toInput=new yt([{x:this.crossInput.x,y:this.crossInput.y},{x:this.add.x,y:this.add.y}],[this.add],e)),this.connections.push(this.toForget=new yt([{x:this.crossForget.x,y:this.crossForget.y},{x:this.forget.x,y:this.forget.y}],[this.forget],e)),this.connections.push(this.toOutput=new yt([{x:this.crossOutput.x,y:this.crossOutput.y},{x:this.output.x,y:this.output.y}],[this.output],e)),this.connections.push(this.addToSave=new yt([{x:this.add.x,y:this.add.y},{x:this.save.x,y:this.save.y}],[this.save],e)),this.connections.push(this.forgetToSave=new yt([{x:this.forget.x,y:this.forget.y},{x:this.save.x,y:this.save.y}],[this.save],e)),this.connections.push(this.saveToCell=new yt([{x:this.save.x,y:this.save.y},{x:this.cell.x,y:this.cell.y}],[this.cell],e)),this.connections.push(this.cellOut=new yt([{x:this.cell.x,y:this.cell.y},{x:this.crossCell.x,y:this.cell.y},{x:this.crossCell.x,y:this.crossCell.y}],[],e)),this.connections.push(this.cellToForget=new yt([{x:this.crossCell.x,y:this.crossCell.y},{x:this.forget.x,y:this.forget.y}],[this.forget],e)),this.connections.push(this.cellToOutput=new yt([{x:this.crossCell.x,y:this.crossCell.y},{x:this.output.x,y:this.output.y}],[this.output],e)),this.connections.push(this.recurrent=new yt([{x:this.output.x,y:this.output.y},{x:this.output.x,y:n+2.5*o},{x:this.receive.x,y:n+2.5*o},{x:this.receive.x,y:this.receive.y}],[this.receive],e)),this.connections.push(this.ghostOutput=new yt([{x:this.output.x,y:this.output.y},{x:this.ghostLast.x,y:this.ghostLast.y}],[this.ghostLast],e)),this.ghostFirst.connections.push(this.ghostInput),this.receive.connections.push(this.bus),this.receive.connections.push(this.crossInput),this.receive.connections.push(this.crossForget),this.receive.connections.push(this.crossOutput),this.receive.connections.push(this.toInput),this.receive.connections.push(this.toForget),this.receive.connections.push(this.toOutput),this.add.connections.push(this.addToSave),this.save.connections.push(this.saveToCell),this.forget.connections.push(this.forgetToSave),this.cell.connections.push(this.cellOut),this.cell.connections.push(this.crossCell),this.cell.connections.push(this.cellToForget),this.cell.connections.push(this.cellToOutput),this.output.connections.push(this.ghostOutput),this.output.connections.push(this.recurrent),this.ghostLast.connections.push(this.ghostFirst),this.ghostFirst.addActiveInput(),this.recurrent.addActiveInput(),this.forget.addActiveInput(),this.heading=new ft(this.s,this.s.detailProps.left+20,this.s.height*this.s.typography.titleOffsetRatio/2,"cell")}return Object(k.a)(t,[{key:"draw",value:function(){var t=this.s;t.rectMode(t.CENTER),t.fill(t.colors.darkgrey),t.rect(t.detailProps.midX,t.detailProps.midY,t.detailProps.width*t.detailProps.horRatio,t.detailProps.height*t.detailProps.verRatio,10);var e,i=Object(gt.a)(this.connections);try{for(i.s();!(e=i.n()).done;){e.value.draw()}}catch(n){i.e(n)}finally{i.f()}var a,s=Object(gt.a)(this.items);try{for(s.s();!(a=s.n()).done;){a.value.draw()}}catch(n){s.e(n)}finally{s.f()}this.heading.draw(t.global.strings.headings[3].title)}},{key:"update",value:function(t){var e=this.s;if(e.cellAnim.forward&&e.cellAnim.frame++,e.cellAnim.forward&&(e.cellAnim.frame%e.pause===0||t)){var i,a=Object(gt.a)(this.connections);try{for(a.s();!(i=a.n()).done;){i.value.sendActivations()}}catch(h){a.e(h)}finally{a.f()}var s,n=Object(gt.a)(this.items);try{for(n.s();!(s=n.n()).done;){s.value.sendActivations()}}catch(h){n.e(h)}finally{n.f()}var r,o=Object(gt.a)(this.connections);try{for(o.s();!(r=o.n()).done;){r.value.updateActivation()}}catch(h){o.e(h)}finally{o.f()}var l,p=Object(gt.a)(this.items);try{for(p.s();!(l=p.n()).done;){l.value.updateActivation()}}catch(h){p.e(h)}finally{p.f()}}else e.cellAnim.error&&(e.frameCount%2===0||t)?(e.cellAnim.errorStep++,e.cellAnim.errorStep>=this.s.cellAnim.maxErrorSteps&&(e.cellAnim.errorStep=0,e.cellAnim.error=!1,e.cellAnim.back=!0,this.showBackStep(0),this.s.props=Object(A.a)({},this.s.props,{ui:Object(A.a)({},this.s.props.ui,{state:[!1,!1,!0]})}))):e.cellAnim.back&&(e.frameCount%5===0||t)&&(e.cellAnim.backStep++,this.showBackStep(e.cellAnim.backStep),e.cellAnim.backStep>e.cellAnim.maxBackSteps&&(e.cellAnim.backStep=0,e.cellAnim.back=!1,this.s.props=Object(A.a)({},this.s.props,{ui:Object(A.a)({},this.s.props.ui,{state:[!0,!1,!1]})}),this.s.props.actions.updateTraining(Object(A.a)({},this.s.props.training,{step:!0}))));this.s.props.actions.updateUI(Object(A.a)({},this.s.props.ui))}},{key:"showBackStep",value:function(t){var e,i=Object(gt.a)(this.connections);try{for(i.s();!(e=i.n()).done;){e.value.deactivate()}}catch(n){i.e(n)}finally{i.f()}var a,s=Object(gt.a)(this.items);try{for(s.s();!(a=s.n()).done;){a.value.deactivate()}}catch(n){s.e(n)}finally{s.f()}if(0!==t)if(1!==t)if(2!==t){if(3===t)return this.cellOut.addNegativeInput(),this.cellToOutput.addNegativeInput(),this.crossCell.addNegativeInput(),void this.toOutput.addNegativeInput();if(t!==this.s.cellAnim.maxBackSteps)switch((t-=2)%12){case 0:this.output.addNegativeInput(),this.ghostFirst.addNegativeInput(),this.forget.addNegativeInput();break;case 1:this.cellOut.addNegativeInput(),this.cellToOutput.addNegativeInput(),this.cellToForget.addNegativeInput(),this.crossCell.addNegativeInput(),this.toOutput.addNegativeInput();break;case 2:this.cell.addNegativeInput(),this.crossOutput.addNegativeInput();break;case 3:this.saveToCell.addNegativeInput(),this.crossOutput.addNegativeInput();break;case 4:this.save.addNegativeInput(),this.crossOutput.addNegativeInput();break;case 5:this.addToSave.addNegativeInput(),this.forgetToSave.addNegativeInput(),this.crossOutput.addNegativeInput();break;case 6:this.add.addNegativeInput(),this.forget.addNegativeInput(),this.crossOutput.addNegativeInput();break;case 7:this.s.cellAnim.maxBackSteps-12>t&&this.forget.addNegativeInput(),this.toInput.addNegativeInput(),this.toForget.addNegativeInput(),this.crossOutput.addNegativeInput();break;case 8:this.s.cellAnim.maxBackSteps-12>t&&this.forget.addNegativeInput(),this.crossOutput.addNegativeInput(),this.crossInput.addNegativeInput(),this.crossForget.addNegativeInput();break;case 9:this.s.cellAnim.maxBackSteps-12>t&&this.forget.addNegativeInput(),this.bus.addNegativeInput();break;case 10:this.receive.addNegativeInput(),this.s.cellAnim.maxBackSteps-12>t&&this.forget.addNegativeInput();break;case 11:this.s.cellAnim.maxBackSteps-12>t&&(this.forget.addNegativeInput(),this.recurrent.addNegativeInput()),this.ghostInput.addNegativeInput()}else this.ghostFirst.addNegativeInput()}else this.output.addNegativeInput();else this.ghostOutput.addNegativeInput();else this.ghostLast.addNegativeInput()}},{key:"prepareBackprop",value:function(){var t=this.s;t.cellAnim={maxSteps:11,maxErrorSteps:50,maxBackSteps:62,step:0,frame:0,inputStep:0,predictionStep:0,errorStep:0,backStep:0,forward:!1,error:!1,back:!0},t.pause=10,this.showBackStep(0)}},{key:"prepareError",value:function(){var t=this.s;t.cellAnim={maxSteps:11,maxErrorSteps:50,maxBackSteps:62,step:0,frame:0,inputStep:0,predictionStep:0,errorStep:0,backStep:0,forward:!1,error:!0,back:!1},t.pause=1;var e,i=Object(gt.a)(this.connections);try{for(i.s();!(e=i.n()).done;){e.value.deactivate()}}catch(p){i.e(p)}finally{i.f()}var a,s=Object(gt.a)(this.items);try{for(s.s();!(a=s.n()).done;){a.value.deactivate()}}catch(p){s.e(p)}finally{s.f()}var n,r=Object(gt.a)(this.connections);try{for(r.s();!(n=r.n()).done;){n.value.updateActivation()}}catch(p){r.e(p)}finally{r.f()}var o,l=Object(gt.a)(this.items);try{for(l.s();!(o=l.n()).done;){o.value.updateActivation()}}catch(p){l.e(p)}finally{l.f()}}},{key:"reset",value:function(){this.s.cellAnim={maxSteps:11,maxErrorSteps:50,maxBackSteps:62,step:0,frame:0,inputStep:0,predictionStep:0,errorStep:0,backStep:0,forward:!0,error:!1,back:!1};var t,e=Object(gt.a)(this.connections);try{for(e.s();!(t=e.n()).done;){t.value.deactivate()}}catch(l){e.e(l)}finally{e.f()}var i,a=Object(gt.a)(this.items);try{for(a.s();!(i=a.n()).done;){i.value.deactivate()}}catch(l){a.e(l)}finally{a.f()}this.ghostFirst.addActiveInput(),this.recurrent.addActiveInput(),this.forget.addActiveInput();var s,n=Object(gt.a)(this.connections);try{for(n.s();!(s=n.n()).done;){s.value.updateActivation()}}catch(l){n.e(l)}finally{n.f()}var r,o=Object(gt.a)(this.items);try{for(o.s();!(r=o.n()).done;){r.value.updateActivation()}}catch(l){o.e(l)}finally{o.f()}}},{key:"mouseMoved",value:function(t,e){var i,a=Object(gt.a)(this.items);try{for(a.s();!(i=a.n()).done;){i.value.mouseMoved(t,e)}}catch(s){a.e(s)}finally{a.f()}this.heading.mouseMoved(t,e)}},{key:"checkClick",value:function(){var t=!1,e=this.s;e.clickedItem&&(e.clickedItem=void 0);var i,a=Object(gt.a)(this.items);try{for(a.s();!(i=a.n()).done;){t=i.value.checkClick()||t}}catch(s){a.e(s)}finally{a.f()}return t||(e.clickedItem=void 0),t=this.heading.checkClick()||t}}]),t}(),xt=i(65);function kt(){return(new xt.a).get("exploRNNIntroState")}function wt(t){(new xt.a).set("exploRNNIntroState",t)}function bt(){(new xt.a).remove("exploRNNIntroState")}function St(t,e,i){var a=t;wt(a=""===t||void 0===t?"input":"input"===t?"network":"network"===t?"sliders":"sliders"===t?"startTraining":"startTraining"===t?"output":"output"===t?"cellTransition":"cellTransition"===t?"detailCell":"detailCell"===t?"detailOutput":"detailOutput"===t?"detailProcess":"detailProcess"===t?"headingExplanation":"done"),i(Object(A.a)({},e,{intro:a}))}var Ot=function(){function t(e,i,a,s){Object(x.a)(this,t),this.s=e,this.i=a,this.layers=i-2,this.layerwidth=s.size,this.nodes=[],this.layerType=s.type,this.active=!1,this.hover=!1,this.hover_left=!1,this.hover_right=!1,this.clicked=!1,this.x=e.netProps.left+e.netProps.width*this.i/(this.layers+1),this.y=e.netProps.midY,this.w=e.netProps.width/(2*this.layers+1)*.8,this.h=.8*this.w,this.clSize=.3*this.w}return Object(k.a)(t,[{key:"draw",value:function(){if("input"!==this.layerType&&"output"!==this.layerType){var t=this.s,e=this.w,i=this.h;t.textAlign(t.CENTER,t.CENTER),t.noFill(),t.stroke(t.colors.bluegrey),t.netAnim&&(t.stroke(t.colors.overview),t.drawingContext.lineDashOffset=this.s.rev?t.frameCount/2:-t.frameCount/2,t.drawingContext.setLineDash([10,10])),t.rect(this.x,this.y+i/2,1.4*e,i,20),t.drawingContext.setLineDash([]),t.noStroke(),t.fill(t.colors.darkbluegrey),this.hover&&(t.fill(t.colors.bluegrey),t.cursor(t.HAND)),this.active&&(t.fill(t.colors.overview),e=1.2*this.w,i=1.2*this.h),t.rect(this.x,this.y,e,i),t.noStroke(),t.fill(t.colors.white),t.strokeWeight(2);for(var a=this.x-e/2,s=this.y-i/2,n=0;n<5;n++)t.ellipse(a+(n+1)*e/6,s+i/3,e/(0===n||2===n?20:10));t.rect(a+3*e/6,s+2*i/3,e/10,e/10),this.hover_left?(t.noStroke(),this.s.props.network.layers>1&&(t.stroke(t.colors.red),t.fill(t.colors.red),t.textSize(this.clSize/2),t.text("X",this.x+e/2-this.clSize/2,this.y-i/2+this.clSize/2),t.textSize(t.typography.fontsize)),t.noStroke(),t.fill(t.colors.darkbluegrey),t.rect(t.mx,t.my+t.typography.tooltipoffset,110,25),t.fill(255),t.text(t.global.strings.tooltipCell,t.mx,t.my+t.typography.tooltipoffset)):this.hover_right&&this.s.props.network.layers>1&&(t.noStroke(),t.fill(t.colors.red),t.rect(this.x+e/2-this.clSize/2,this.y-i/2+this.clSize/2,this.clSize,this.clSize),t.textAlign(t.CENTER,t.CENTER),t.fill(t.colors.darkbluegrey),t.rect(t.mx,t.my+t.typography.tooltipoffset,120,25),t.fill(255),t.textSize(this.clSize/2),t.text("X",this.x+e/2-this.clSize/2,this.y-i/2+this.clSize/2),t.textSize(t.typography.fontsize),t.text(t.global.strings.tooltipDelete,t.mx,t.my+t.typography.tooltipoffset))}}},{key:"mouseMoved",value:function(t,e){if("input"!==this.layerType&&"output"!==this.layerType)if(t>this.x-this.w/2&&t<this.x+this.w/2&&e>this.y-this.h/2&&e<this.y+this.h/2){this.hover=!0;var i=this.w,a=this.h;this.hover_left=!(this.hover_right=t>this.x+i/2-this.clSize&&e<this.y-a/2+this.clSize&&this.s.props.network.layers>1),["input","network","startTraining","output",void 0,""].includes(this.s.props.cookiesState.intro)&&this.hover_left&&(this.hover_left=!1,this.hover=!1)}else this.hover=this.hover_left=this.hover_right=!1}},{key:"checkClick",value:function(){"input"!==this.layerType&&"output"!==this.layerType&&(this.hover?(this.clicked=!0,this.s.clickedBlock=this,this.hover_left?(this.s.detail=!0,this.s.props.actions.updateUI(Object(A.a)({},this.s.props.ui,{detail:!0,anim:this.s.props.training.running})),this.s.props.actions.stopTraining(this.s.props.training),"cellTransition"===this.s.props.cookiesState.intro&&St(this.s.props.cookiesState.intro,this.s.props.cookiesState,this.s.props.actions.updateCookiesState)):this.s.props.network.layers>1&&(this.s.props.actions.stopTraining(this.s.props.training),this.s.props.actions.updateNetwork(Object(A.a)({},this.s.props.network,{layers:this.s.props.network.layers-1})),this.s.props.actions.updateTraining(Object(A.a)({},this.s.props.training,{reset:!0})))):this.clicked=!1,this.hover=!1)}},{key:"update",value:function(){return this.active?(this.active=!1,this.i+1):-1}},{key:"activate",value:function(){this.active=!0}},{key:"deactivate",value:function(){this.active=!1}}]),t}(),Tt=function(){function t(e,i,a){Object(x.a)(this,t),this.s=e,this.i=a,this.layers=i-2,this.layerwidth=1,this.nodes=[],this.hover=!1,this.clicked=!1,this.x=e.netProps.left+e.netProps.width*this.i/(this.layers+1),this.y=e.netProps.midY,this.w=e.netProps.width/(2*this.layers+1)*.25,this.h=this.w}return Object(k.a)(t,[{key:"draw",value:function(){if(!(this.s.props.network.layers>=7)){var t=this.s;t.textAlign(t.CENTER,t.CENTER);var e=t.dist(t.mx,t.my,this.x,this.y),i=(2*this.w-e)/this.w*255;i>255?i=255:i<=0&&(i=0),t.fill(255,i),this.hover&&(t.fill(t.colors.bluegrey),t.cursor(t.HAND)),t.ellipse(this.x,this.y,this.w,this.h),this.hover?(t.fill(t.colors.white),t.textSize(this.w),t.text("+",this.x,this.y-this.w/20),t.cursor(t.HAND)):(t.colors.darkbluegrey.setAlpha(i),t.fill(t.colors.darkbluegrey),t.textSize(this.w),t.text("+",this.x,this.y-this.w/20)),t.noStroke(),t.textSize(t.typography.fontsize),t.colors.darkbluegrey.setAlpha(255),this.hover&&(t.fill(t.colors.darkbluegrey),t.noStroke(),t.rect(t.mx,t.my+t.typography.tooltipoffset,100,25),t.fill(255),t.text(t.global.strings.tooltipAdd,t.mx,t.my+t.typography.tooltipoffset))}}},{key:"mouseMoved",value:function(t,e){t>this.x-this.w/2&&t<this.x+this.w/2&&e>this.y-this.h/2&&e<this.y+this.h/2?this.hover=!0:this.hover=!1}},{key:"checkClick",value:function(){this.hover&&!this.clicked&&this.s.props.network.layers<7&&(this.s.props.actions.stopTraining(this.s.props.training),this.s.props.actions.updateNetwork(Object(A.a)({},this.s.props.network,{layers:this.s.props.network.layers+1})),this.s.props.actions.updateTraining(Object(A.a)({},this.s.props.training,{reset:!0}))),this.clicked=this.hover}}]),t}(),At=function(){function t(e){Object(x.a)(this,t),this.s=e,this.layers=[],this.fakeLayers=[],this.loss=!1,this.s.rev=!1;var i=e.network.length;if(0!==i){var a=e.network[0];this.active=!1,this.layers.push(new Ot(e,i,0,a)),this.fakeLayers.push(new Tt(e,i,.5));for(var s=1;s<i-1;s++)a=e.network[s],this.layers.push(new Ot(e,i,s,a)),this.fakeLayers.push(new Tt(e,i,s+.5));a=e.network[i-1],this.layers.push(new Ot(e,i,i-1,a)),this.heading=new ft(this.s,this.s.netProps.left+20,this.s.height*this.s.typography.titleOffsetRatio/2,"network")}}return Object(k.a)(t,[{key:"draw",value:function(){var t=this.s;t.stroke(t.colors.lightgrey),t.line(t.netProps.right,0,t.netProps.right,t.netProps.height),t.strokeWeight(2*t.netScale),t.netAnim?(t.stroke(t.colors.overview),t.drawingContext.lineDashOffset=this.s.rev?t.frameCount/2:-t.frameCount/2,t.drawingContext.setLineDash([10,10])):t.stroke(t.colors.bluegrey),this.s.noFill(),this.s.line(t.netProps.left,t.netProps.midY,t.netProps.right,t.netProps.midY),t.drawingContext.setLineDash([]),this.updatePause=Math.round(t.netPredFrames/this.layers.length),this.updatePauseRev=Math.round(t.netTrainFrames/this.layers.length),this.s.rev=t.netFrame>t.netPredFrames+t.netLossFrames,!this.s.rev&&t.netAnim&&t.props.training.running&&t.netFrame%this.updatePause===0&&this.update(),this.s.rev&&t.netAnim&&t.props.training.running&&(t.netFrame-(t.netPredFrames+t.netLossFrames))%this.updatePauseRev===0&&this.update();var e,i=Object(gt.a)(this.layers);try{for(i.s();!(e=i.n()).done;){e.value.draw()}}catch(n){i.e(n)}finally{i.f()}var a,s=Object(gt.a)(this.fakeLayers);try{for(s.s();!(a=s.n()).done;){a.value.draw()}}catch(n){s.e(n)}finally{s.f()}this.heading.draw(t.global.strings.headings[1].title)}},{key:"mouseMoved",value:function(t,e){var i,a=Object(gt.a)(this.layers);try{for(a.s();!(i=a.n()).done;){i.value.mouseMoved(t,e)}}catch(r){a.e(r)}finally{a.f()}var s,n=Object(gt.a)(this.fakeLayers);try{for(n.s();!(s=n.n()).done;){s.value.mouseMoved(t,e)}}catch(r){n.e(r)}finally{n.f()}this.heading.mouseMoved(t,e)}},{key:"checkClick",value:function(){var t,e=Object(gt.a)(this.layers);try{for(e.s();!(t=e.n()).done;){t.value.checkClick()}}catch(s){e.e(s)}finally{e.f()}var i,a=Object(gt.a)(this.fakeLayers);try{for(a.s();!(i=a.n()).done;){i.value.checkClick()}}catch(s){a.e(s)}finally{a.f()}this.heading.checkClick()}},{key:"update",value:function(){var t,e=this.s,i=-1,a=0,s=Object(gt.a)(this.layers);try{for(s.s();!(t=s.n()).done;){(a=t.value.update())>i&&(i=a)}}catch(n){s.e(n)}finally{s.f()}!e.rev&&i>=0&&i<this.layers.length?this.layers[i].activate():e.rev&&i>=2&&i<=this.layers.length?this.layers[i-2].activate():this.layers[this.layers.length-1].activate()}},{key:"start",value:function(){var t,e=Object(gt.a)(this.layers);try{for(e.s();!(t=e.n()).done;){t.value.deactivate()}}catch(i){e.e(i)}finally{e.f()}this.s.rev=!1,this.layers[1].activate()}}]),t}(),Et=function(){function t(){Object(x.a)(this,t)}return Object(k.a)(t,[{key:"drawTextPlot",value:function(t){var e="",i=1,a=this.in+this.out;if(t.plotAnim&&t.plotFrame<t.plotMoveFrames&&(i=t.plotFrame/t.plotMoveFrames),t.plotAnim&&t.plotFrame>t.plotMoveFrames&&t.plotFrame<t.plotMoveFrames+t.plotScanFrames&&(a=(t.plotFrame-t.plotMoveFrames)/t.plotScanFrames*this.total),a>this.in+this.out&&(a=this.in+this.out),this.vis=255*i,t.push(),t.translate(this.cx-this.halfW,this.cy),t.plotAnim&&t.plotFrame>t.plotMoveFrames&&t.plotFrame<t.plotMoveFrames+t.plotScanFrames){var s=a*this.stepWidth,n=s-this.in*this.stepWidth;n<0&&(n=0),t.noStroke(),t.colors.lightgrey.setAlpha(200),t.fill(t.colors.lightgrey),t.colors.lightgrey.setAlpha(255),t.rect(n+(s-n)/2,0,s-n,4*t.typography.fontsize,10)}if(t.props.ui.data&&t.props.ui.data[this.index].chartPrediction){t.textSize(t.typography.fontsize),t.colors.black.setAlpha(this.vis),t.fill(t.colors.black),t.colors.black.setAlpha(255);for(var r=0;r<=this.in;r++)(e=t.props.ui.data[this.index].chartPrediction[r])?(0===r&&(t.push(),t.noStroke(),t.textAlign(t.LEFT,t.BOTTOM),t.text(t.global.strings.plotInput,0,-2*t.typography.fontsize-5),t.pop()),Object.prototype.hasOwnProperty.call(t.props.textData,"textString")&&(e=t.props.textData.getFromOneHot(e),t.textSize(t.typography.fontsize),t.noStroke(),t.text(e,r*this.stepWidth,0))):e=""}if(t.props.ui.data&&t.props.ui.data[this.index].chartOutput){t.colors.grey.setAlpha(this.vis),t.fill(t.colors.grey),t.colors.grey.setAlpha(255);for(var o=0;o<this.out;o++)(e=t.props.ui.data[this.index].chartOutput[o])&&Object.prototype.hasOwnProperty.call(t.props.textData,"textString")&&(e=t.props.textData.getFromOneHot(e),t.text(e,(o+this.in)*this.stepWidth,-t.typography.fontsize));t.props.ui.data[this.index].chartOutput[0]&&(t.push(),t.noStroke(),t.textAlign(t.RIGHT,t.BOTTOM),t.text(t.global.strings.plotOutput,(this.out-1+this.in)*this.stepWidth+10,-2*t.typography.fontsize-5),t.pop())}if(t.props.ui.data&&t.props.ui.data[this.index].prediction&&(!1===t.plotAnim||!0===t.plotAnim&&t.plotFrame>t.plotMoveFrames)){t.colors.overview.setAlpha(this.vis),t.fill(t.colors.overview),t.colors.overview.setAlpha(255);for(var l=0;l<this.out&&l<a-this.in;l++)t.props.ui.data[this.index].prediction&&(e=t.props.ui.data[this.index].prediction[l])&&Object.prototype.hasOwnProperty.call(t.props.textData,"textString")&&(e=t.props.textData.getFromOneHot(e),t.text(e,(l+this.in)*this.stepWidth,t.typography.fontsize));t.endShape(),t.push(),a-this.in>0&&t.props.ui.data[this.index].prediction[0]&&(t.noStroke(),t.textAlign(t.RIGHT,t.TOP),t.text(t.global.strings.plotPrediction,(a-1)*this.stepWidth+10,2*t.typography.fontsize+5)),t.pop()}t.pop()}}]),t}(),jt=function(){function t(){Object(x.a)(this,t)}return Object(k.a)(t,[{key:"drawFunctionPlot",value:function(t){var e,i=1,a=this.in+this.out;if(t.plotAnim&&t.plotFrame<t.plotMoveFrames&&(i=t.plotFrame/t.plotMoveFrames),t.plotAnim&&t.plotFrame>t.plotMoveFrames&&t.plotFrame<t.plotMoveFrames+t.plotScanFrames&&(a=(t.plotFrame-t.plotMoveFrames)/t.plotScanFrames*this.total),a>this.in+this.out&&(a=this.in+this.out),this.vis=255*i,t.push(),t.translate(this.cx,this.cy),t.plotAnim&&t.plotFrame>t.plotMoveFrames&&t.plotFrame<t.plotMoveFrames+t.plotScanFrames){var s=-this.halfW+a*this.stepWidth,n=s-this.in*this.stepWidth;n<-this.halfW&&(n=-this.halfW),t.noStroke(),t.colors.lightgrey.setAlpha(200),t.fill(t.colors.lightgrey),t.colors.lightgrey.setAlpha(255),t.rect(n+(s-n)/2,0,s-n,1.8*this.halfH,10)}if(t.colors.darkbluegrey.setAlpha(this.vis),t.stroke(t.colors.darkbluegrey),t.colors.darkbluegrey.setAlpha(255),t.line(-this.halfW,0,this.halfW,0),t.line(-this.halfW+this.in*this.stepWidth,-(this.halfH-20),-this.halfW+this.in*this.stepWidth,this.halfH-20),t.props.ui.data&&t.props.ui.data[this.index].chartPrediction){t.colors.darkgrey.setAlpha(this.vis),t.stroke(t.colors.darkgrey),t.colors.darkgrey.setAlpha(255),t.noFill(),t.beginShape(),t.strokeWeight(2);for(var r=0;r<=this.in;r++)e=t.props.ui.data[this.index].chartPrediction[r],0===r&&(t.push(),t.noStroke(),t.textAlign(t.RIGHT,t.BOTTOM),t.textStyle(t.BOLD),t.colors.darkgrey.setAlpha(this.vis),t.fill(t.colors.darkgrey),t.colors.darkgrey.setAlpha(255),t.text(this.s.global.strings.plotInput,-this.halfW-5,-this.halfH/2*e),t.pop()),t.vertex(-this.halfW+r*this.stepWidth,-this.halfH/2*e);e=t.props.ui.data[this.index].chartOutput[0],t.vertex(-this.halfW+this.in*this.stepWidth,-this.halfH/2*e),t.endShape()}if(t.strokeWeight(1),t.props.ui.data&&t.props.ui.data[this.index].chartOutput){t.colors.grey.setAlpha(this.vis),t.stroke(t.colors.grey),t.colors.grey.setAlpha(255),t.noFill(),t.beginShape();for(var o=0;o<this.out;o++)e=t.props.ui.data[this.index].chartOutput[o],t.vertex(-this.halfW+(o+this.in)*this.stepWidth,-this.halfH/2*e);t.endShape(),t.push(),t.noStroke(),t.colors.grey.setAlpha(this.vis),t.fill(t.colors.grey),t.colors.grey.setAlpha(255),t.textAlign(t.LEFT,t.BOTTOM),t.text(t.global.strings.plotOutput,-this.halfW+this.total*this.stepWidth,-this.halfH/2*e+5),t.pop()}if(t.strokeWeight(3),t.props.ui.data&&t.props.ui.data[this.index].prediction&&(!1===t.plotAnim||!0===t.plotAnim&&t.plotFrame>t.plotMoveFrames)){t.colors.overview.setAlpha(this.vis),t.stroke(t.colors.overview),t.colors.overview.setAlpha(255),t.noFill(),t.beginShape();for(var l=0;l<this.out&&l<a-this.in;l++)t.props.ui.data[this.index].prediction&&(e=t.props.ui.data[this.index].prediction[l],t.vertex(-this.halfW+(l+this.in)*this.stepWidth,-this.halfH/2*e));t.endShape(),e=t.props.ui.data[this.index].prediction[Math.round(a)-this.in],t.push(),t.noStroke(),t.textAlign(t.LEFT,t.TOP),t.textStyle(t.BOLD),t.fill(t.colors.overview),t.text(t.global.strings.plotPrediction,-this.halfW+a*this.stepWidth,-this.halfH/2*e),t.pop()}if(t.strokeWeight(2),this.s.netFrame>this.s.netPredFrames+this.s.netLossFrames&&t.props.ui.data&&t.props.ui.data[this.index].prediction&&(this.index>2||2===this.index&&(!1===t.plotAnim||!0===t.plotAnim&&t.plotFrame>t.plotMoveFrames))){t.colors.overviewlight.setAlpha(this.vis),t.stroke(t.colors.overviewlight),t.colors.overview.setAlpha(255);for(var p=0;p<this.out;p++)if(t.props.ui.data[this.index].prediction){var h=t.props.ui.data[this.index].prediction[p],c=t.props.ui.data[this.index].chartOutput[p],u=-this.halfH/2*h,d=-this.halfH/2*c,g=(this.s.netFrame-(this.s.netPredFrames+this.s.netLossFrames))/this.s.netTrainFrames;t.line(-this.halfW+(p+this.in)*this.stepWidth,u,-this.halfW+(p+this.in)*this.stepWidth,u+(d-u)*g)}t.noStroke()}t.pop()}}]),t}();function It(t,e,i){var a=i;"text"===t&&(a=3.5*e.typography.fontsize);var s=e.outProps.left,n=e.outProps.midY;e.push(),e.colors.lightgrey.setAlpha(100),e.fill(e.colors.lightgrey),e.colors.lightgrey.setAlpha(255);for(var r=-1;r<2;r+=2)e.beginShape(),e.vertex(s,n),e.bezierVertex(s+80,n,s+20,n+r*a,s+100,n+r*a),e.vertex(s+100,n),e.endShape(e.CLOSE);e.rectMode(e.CORNER),e.rect(s+100,n-a,e.outProps.right-e.outProps.left-100,2*a),e.noFill(),e.netAnim?(e.stroke(e.colors.overview),e.drawingContext.lineDashOffset=e.rev?e.frameCount/2:-e.frameCount/2,e.drawingContext.setLineDash([10,10])):e.stroke(e.colors.bluegrey);for(var o=-1;o<2;o+=2)e.bezier(s,n,s+80,n,s+20,n+o*a,s+100,n+o*a);e.pop()}function Pt(t,e,i){var a=i;"text"===t&&(a=3.5*e.typography.fontsize);var s=e.outProps.midY;e.push(),e.textAlign(e.RIGHT,e.TOP),e.textSize(e.typography.fontsizesmall),e.fill(e.colors.darkgrey),e.noStroke(),e.text(e.global.strings.dataExplanation,e.outProps.right-10,s+a+10),e.pop()}var Ct=function(){function t(e){Object(x.a)(this,t),this.s=e,this.index=2,this.cx=e.outProps.midX,this.cy=e.outProps.midY,this.scale=1-Math.abs(e.height/2-this.cy)/(e.height/2)*.5,this.plotWidth=e.outProps.width*e.outProps.horRatio,this.plotHeight=e.outProps.height*e.outProps.verRatio,e.props&&(e.props.training.values+e.props.training.predictions===0?this.stepWidth=2:(this.total=e.props.training.values+e.props.training.predictions,this.stepWidth=this.plotWidth/this.total),this.heading=new ft(this.s,this.s.outProps.left+20,this.s.height*this.s.typography.titleOffsetRatio/2,"prediction"),this.textPlot=new Et,this.functionPlot=new jt)}return Object(k.a)(t,[{key:"plotHeading",value:function(){this.heading.draw(this.s.global.strings.headings[2].title)}},{key:"draw",value:function(){var t=this.s;t.props&&(t.props.training.values+t.props.training.predictions===0?this.stepWidth=2:(this.total=t.props.training.values+t.props.training.predictions,this.stepWidth=this.plotWidth/this.total),this.in=t.props.training.values,this.out=t.props.training.predictions,this.total=this.in+this.out,this.halfW=this.plotWidth/2,this.halfH=this.plotHeight/2,2===this.stepWidth&&0!==this.total&&(this.stepWidth=this.plotWidth/this.total),"Text Data"===this.s.props.training.inputType?(It("text",t,this.halfH),this.plotHeading(),this.textPlot.drawTextPlot.call(this,t),Pt("text",t,this.halfH)):(It("function",t,this.halfH),this.plotHeading(),this.functionPlot.drawFunctionPlot.call(this,t),Pt("function",t,this.halfH)))}},{key:"mouseMoved",value:function(t,e){this.heading.mouseMoved(t,e)}},{key:"checkClick",value:function(){this.heading.checkClick()}}]),t}(),Nt=function(){function t(e){Object(x.a)(this,t),this.s=e,this.dist=.18*e.inProps.height,this.buttons=[],this.steps=30,this.noises=[];for(var i=0;i<this.steps;i++)this.noises.push(.4*Math.random()-.2);"Text Data"===e.props.training.inputType?(this.buttons.push(new Dt(e,"text",1,2,this.dist,0,0,"abab")),this.buttons.push(new Dt(e,"text",2,2,this.dist,0,0,"lorem"))):(this.buttons.push(new Dt(e,"sin",1,4,this.dist,this.steps,this.noises)),this.buttons.push(new Dt(e,"saw",2,4,this.dist,this.steps,this.noises)),this.buttons.push(new Dt(e,"sqr",3,4,this.dist,this.steps,this.noises)),this.buttons.push(new Dt(e,"sinc",4,4,this.dist,this.steps,this.noises))),this.heading=new ft(this.s,this.s.inProps.left+20,this.s.height*this.s.typography.titleOffsetRatio/2,"input")}return Object(k.a)(t,[{key:"draw",value:function(){var t,e=this.s,i=Object(gt.a)(this.buttons);try{for(i.s();!(t=i.n()).done;){t.value.draw()}}catch(a){i.e(a)}finally{i.f()}this.heading.draw(e.global.strings.headings[0].title),e.stroke(e.colors.lightgrey),e.line(e.inProps.right,0,e.inProps.right,e.inProps.height)}},{key:"checkClick",value:function(){var t,e=Object(gt.a)(this.buttons);try{for(e.s();!(t=e.n()).done;){t.value.checkClick()}}catch(i){e.e(i)}finally{e.f()}this.heading.checkClick()}},{key:"mouseMoved",value:function(t,e){this.heading.mouseMoved(t,e);var i,a=Object(gt.a)(this.buttons);try{for(a.s();!(i=a.n()).done;){i.value.mouseMoved(t,e)}}catch(s){a.e(s)}finally{a.f()}}}]),t}(),Dt=function(){function t(e,i,a,s,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";Object(x.a)(this,t),this.s=e,this.type=i,this.pos=a,this.maxPos=s,this.x=e.inProps.midX,this.y=e.inProps.midY+(a-1)*n-(s/2-.5)*n,this.size=.8*n,this.left=this.x-this.size/2,this.right=this.x+this.size/2,this.top=this.y-this.size/2,this.bot=this.y+this.size/2,this.active=e.props.training.dataTypes.includes(i),this.steps=r,this.noises=o,this.textType=l}return Object(k.a)(t,[{key:"draw",value:function(){var t=this.s;t.fill(t.colors.lightgrey),t.noStroke(),t.strokeWeight(2),this.active=t.props.training.dataTypes.includes(this.type)||t.props.training.dataTypes.includes(this.textType),this.active&&(t.noFill(),t.netAnim&&!this.s.rev?(t.stroke(t.colors.overview),t.drawingContext.lineDashOffset=-t.frameCount/2,t.drawingContext.setLineDash([10,10])):t.stroke(t.colors.bluegrey),t.bezier(this.x+this.size/2,this.y,t.inProps.right-20,this.y,this.x+this.size/2+20,t.inProps.height/2,t.inProps.right,t.inProps.height/2),t.noStroke(),t.drawingContext.setLineDash([]),t.fill(t.colors.overview)),this.hover&&(t.fill(t.colors.bluegrey),this.active&&t.fill(t.colors.overviewdark),t.cursor(t.HAND)),t.rect(this.x,this.y,this.size,this.size);var e=this.x-this.size/2,i=this.y;if(t.noFill(),"text"===this.type)t.fill(t.colors.white),t.textSize(30),t.textAlign(t.CENTER,t.CENTER),t.text(this.textType,e+this.size/2,i),t.textSize(t.typography.fontsize);else{var a,s=2*Math.PI,n=this.size/s;t.stroke(t.colors.white),t.beginShape();for(var r=0;r<this.steps;r++){a=this.noises[r]*(this.s.props.training.noise/100);var o=r/this.steps*s,l=(r+t.frameCount/8)/this.steps*s,p=this.dataFunc(this.active&&t.netAnim?l:o,this.type)+a;t.vertex(e+this.size-o*n,i+p*this.size/4)}t.endShape()}}},{key:"dataFunc",value:function(t,e){var i=Math.sin(t);return"sinc"===e&&(i=(Math.sin(1.5*t)+Math.sin(4.5*t))/1.5),"saw"===e&&(i=t%Math.PI/Math.PI*2-1),"sqr"===e&&(i=Math.sin(Math.PI/2*t)>=0?1:-1),i}},{key:"checkClick",value:function(){var t=this.s.mx,e=this.s.my,i=!1;if(t>this.left&&t<this.right&&e>this.top&&e<this.bot){var a=this.s.props.training.dataTypes,s=a;("text"===this.type&&!a.includes(this.textType)||"text"!==this.type&&!a.includes(this.type))&&(0===this.s.props.network.iteration?(s="text"===this.type?[this.textType]:[this.type],i=!0):(this.s.props.actions.updateAlertSnack({open:!0,message:"This change can only be made after a Network Reset."}),s=a)),this.s.props.actions.updateTraining(Object(A.a)({},this.s.props.training,{dataTypes:s,reset:i}))}}},{key:"mouseMoved",value:function(t,e){t>this.left&&t<this.right&&e>this.top&&e<this.bot?this.hover=!0:this.hover=!1}}]),t}(),Wt=function(){function t(){Object(x.a)(this,t)}return Object(k.a)(t,[{key:"drawTextPlot",value:function(t){var e;if(t.props&&t.props.ui.data){t.props.training.values+t.props.training.predictions===0?this.stepWidth=2:(this.total=t.props.training.values+t.props.training.predictions,this.stepWidth=this.plotWidth/this.total),this.in=t.props.training.values,this.out=t.props.training.predictions,this.total=this.in+this.out,this.halfW=this.plotWidth/2,this.halfH=this.plotHeight/2,2===this.stepWidth&&0!==this.total&&(this.stepWidth=this.plotWidth/this.total);var i=t.props.ui.data[this.dataIndex].chartPrediction.concat(t.props.ui.data[this.dataIndex].prediction);if(t.push(),t.translate(t.cellPlotProps.midX-this.halfW,t.cellPlotProps.midY),t.cellAnim.forward){t.noStroke(),t.rectMode(t.CORNER);var a=t.cellAnim.predictionStep*this.stepWidth-10,s=this.in*this.stepWidth;t.colors.lightgrey.setAlpha(120),t.fill(t.colors.lightgrey),t.colors.lightgrey.setAlpha(255),t.rect(a,-2*t.typography.fontsize,s,4*t.typography.fontsize,10)}if(t.props.ui.data&&t.props.ui.data[this.dataIndex].chartPrediction&&t.props.ui.data[this.dataIndex].chartOutput&&t.props.ui.data[this.dataIndex].prediction){t.textSize(t.typography.fontsize),t.fill(t.colors.black);for(var n=0;n<=this.in;n++)(e=t.props.ui.data[this.dataIndex].chartPrediction[n])?(0===n&&(t.push(),t.noStroke(),t.textAlign(t.LEFT,t.BOTTOM),t.text(t.global.strings.plotInput,0,-2*t.typography.fontsize-5),t.pop()),Object.prototype.hasOwnProperty.call(t.props.textData,"textString")&&(e=t.props.textData.getFromOneHot(e),t.textSize(t.typography.fontsize),t.noStroke(),t.text(e,n*this.stepWidth,0))):e="";t.fill(t.colors.grey);for(var r=0;r<this.out;r++)(e=t.props.ui.data[this.dataIndex].chartOutput[r])&&Object.prototype.hasOwnProperty.call(t.props.textData,"textString")&&(e=t.props.textData.getFromOneHot(e),t.text(e,(r+this.in)*this.stepWidth,-t.typography.fontsize));t.push(),t.noStroke(),t.fill(t.colors.grey),t.textAlign(t.RIGHT,t.BOTTOM),t.text(t.global.strings.plotOutput,(this.out-1+this.in)*this.stepWidth+10,-2*t.typography.fontsize-5),t.pop();var o=t.cellAnim.predictionStep,l=t.cellAnim.predictionStep+t.cellAnim.inputStep;if(t.cellAnim.forward){t.noStroke(),t.fill(t.colors.darkbluegrey),t.textStyle(t.BOLD);for(var p=o;p<=l;p++)(e=t.props.ui.data[this.dataIndex].chartPrediction[p])&&Object.prototype.hasOwnProperty.call(t.props.textData,"textString")&&(e=t.props.textData.getFromOneHot(e),t.textSize(t.typography.fontsize),t.noStroke(),t.text(e,p*this.stepWidth,0));t.textStyle(t.NORMAL);t.stroke(t.colors.darkgrey),t.noFill();var h=(l+1)*this.stepWidth-10;t.strokeWeight(1),t.line(h,-1.5*t.typography.fontsize,h,1.5*t.typography.fontsize)}var c=t.cellAnim.forward?this.in+t.cellAnim.predictionStep:this.total;if(t.noStroke(),t.fill(t.colors.detail),t.props.ui.data&&t.props.ui.data[this.dataIndex].chartOutput){for(var u=this.in;u<c;u++)l>=u?t.textStyle(t.BOLD):t.textStyle(t.NORMAL),(e=i[u])&&Object.prototype.hasOwnProperty.call(t.props.textData,"textString")&&(e=t.props.textData.getFromOneHot(e),t.text(e,u*this.stepWidth,t.typography.fontsize));t.push(),c>this.in&&(t.noStroke(),t.textAlign(t.RIGHT,t.TOP),t.fill(t.colors.detail),t.text(t.global.strings.plotPrediction,(c-1)*this.stepWidth+10,2*t.typography.fontsize+5)),t.pop()}t.textStyle(t.NORMAL)}t.pop()}}}]),t}(),Ft=function(){function t(){Object(x.a)(this,t)}return Object(k.a)(t,[{key:"drawFunctionPlot",value:function(t){var e,i,a,s;if(t.props&&t.props.ui.data){t.props.training.values+t.props.training.predictions===0?this.stepWidth=2:(this.total=t.props.training.values+t.props.training.predictions,this.stepWidth=this.plotWidth/this.total),this.in=t.props.training.values,this.out=t.props.training.predictions,this.total=this.in+this.out,this.halfW=this.plotWidth/2,this.halfH=this.plotHeight/2,2===this.stepWidth&&0!==this.total&&(this.stepWidth=this.plotWidth/this.total);var n=this.stepWidth,r=t.props.ui.data[this.dataIndex].chartPrediction.concat(t.props.ui.data[this.dataIndex].chartOutput),o=t.props.ui.data[this.dataIndex].chartPrediction.concat(t.props.ui.data[this.dataIndex].prediction);if(t.push(),t.translate(t.cellPlotProps.midX,t.cellPlotProps.midY),t.ellipseMode(t.CENTER),t.cellAnim.forward){t.noStroke();var l=-this.halfW+t.cellAnim.predictionStep*this.stepWidth,p=l+(this.in-1)*this.stepWidth;t.colors.lightgrey.setAlpha(120),t.fill(t.colors.lightgrey),t.colors.lightgrey.setAlpha(255),t.rect(l+(this.in-1)*this.stepWidth/2,0,(this.in-1)*this.stepWidth,1.2*this.halfH);var h=(t.cellAnim.step+t.cellAnim.inputStep*t.cellAnim.maxSteps)/(t.cellAnim.maxSteps*this.in);t.stroke(t.colors.darkgrey),t.noFill();var c=l+this.in*this.stepWidth*h;c>p&&(c=p),t.strokeWeight(1),t.line(c,-.6*this.halfH,c,.6*this.halfH)}if(t.noFill(),t.strokeWeight(2),t.stroke(t.colors.darkgrey),t.line(-this.halfW,0,this.halfW,0),t.line(-this.halfW+this.in*this.stepWidth,-this.halfH,-this.halfW+this.in*this.stepWidth,this.halfH),t.props.ui.data&&t.props.ui.data[this.dataIndex].chartPrediction&&t.props.ui.data[this.dataIndex].chartOutput&&t.props.ui.data[this.dataIndex].prediction){t.beginShape();for(var u=0;u<=this.in;u++)e=r[u],0===u&&(t.noStroke(),t.textAlign(t.RIGHT,t.BOTTOM),t.textStyle(t.BOLD),t.fill(t.colors.darkgrey),t.text(t.global.strings.plotInput,-this.halfW-5,-this.halfH/2*e),t.noFill(),t.strokeWeight(2),t.stroke(t.colors.darkgrey),t.textStyle(t.NORMAL)),t.vertex(-this.halfW+u*n,-this.halfH/2*e);t.endShape(),t.beginShape(),t.stroke(t.colors.grey),t.strokeWeight(1);for(var d=this.in;d<this.total;d++)e=r[d],t.vertex(-this.halfW+d*n,-this.halfH/2*e);t.endShape(),t.noStroke(),t.fill(t.colors.grey),t.textAlign(t.LEFT,t.BOTTOM),t.text(t.global.strings.plotOutput,-this.halfW+this.total*n,-this.halfH/2*e+5),t.noStroke(),t.fill(t.colors.darkgrey);for(var g=0;g<this.in;g++)e=r[g],t.ellipse(-this.halfW+g*n,-this.halfH/2*e,4);t.strokeWeight(1),t.noFill(),t.stroke(t.colors.detaillight);for(var f=t.cellAnim.forward?this.in+t.cellAnim.predictionStep-1:this.total,y=this.in;y<=f;y++)e=o[y],i=r[y],t.line(-this.halfW+y*n,-this.halfH/2*e,-this.halfW+y*n,-this.halfH/2*i);t.noStroke(),t.fill(t.colors.grey);for(var m=this.in;m<=f;m++)e=r[m],t.ellipse(-this.halfW+m*n,-this.halfH/2*e,4);if(!t.cellAnim.forward){var v=t.cellAnim.errorStep/t.cellAnim.maxErrorSteps;t.cellAnim.back&&(v=1-t.cellAnim.backStep/t.cellAnim.maxBackSteps),t.stroke(t.colors.darkgrey),t.strokeWeight(1);for(var x=this.in;x<=this.total;x++){if(e=o[x],i=r[x],a=-this.halfH/2*e,s=-this.halfH/2*i,t.cellAnim.back){var k=a;a=s,s=k}t.line(-this.halfW+x*n,a,-this.halfW+x*n,a+(s-a)*v)}t.noStroke(),t.fill(t.colors.grey);for(var w=this.in;w<=f;w++)e=r[w],t.ellipse(-this.halfW+w*n,-this.halfH/2*e,4)}t.stroke(t.colors.detail),t.strokeWeight(2),t.noFill(),t.beginShape();for(var b=this.in;b<=f;b++)e=o[b],t.vertex(-this.halfW+b*n,-this.halfH/2*e);if(t.endShape(),f>=this.in&&(t.noStroke(),t.textAlign(t.LEFT,t.TOP),t.textStyle(t.BOLD),t.fill(t.colors.detail),t.text(t.global.strings.plotPrediction,-this.halfW+f*n+5,-this.halfH/2*e)),t.cellAnim.forward){t.noStroke(),t.fill(t.colors.detaildark);for(var S=t.cellAnim.predictionStep,O=t.cellAnim.predictionStep+t.cellAnim.inputStep,T=S;T<=O;T++)e=o[T],T<this.in?t.fill(t.colors.darkgrey):t.fill(t.colors.detaildark),t.ellipse(-this.halfW+T*n,-this.halfH/2*e,6);t.cellAnim.predictionStep>0&&(e=o[this.in+(t.cellAnim.predictionStep-1)],t.cellAnim.inputStep===this.in-1?(t.fill(t.colors.detaildark),t.ellipse(-this.halfW+f*n,-this.halfH/2*e,12)):(t.fill(t.colors.detail),t.ellipse(-this.halfW+f*n,-this.halfH/2*e,10)))}}t.pop()}}}]),t}();function zt(t,e,i){var a=i;"text"===t&&(a=3*e.typography.fontsize);var s=e.outProps.midY;e.push(),e.textAlign(e.RIGHT,e.TOP),e.textSize(e.typography.fontsizesmall),e.fill(e.colors.darkgrey),e.noStroke(),e.text(e.global.strings.backpropExplanation,e.outProps.right-10,s+a+10),e.pop()}var Mt=function(){function t(e){Object(x.a)(this,t),this.s=e,this.dataIndex=2,this.plotWidth=e.cellPlotProps.width*e.cellPlotProps.horRatio,this.plotHeight=e.cellPlotProps.height*e.cellPlotProps.verRatio,e.props&&(e.props.training.values+e.props.training.predictions===0?this.stepWidth=2:(this.total=e.props.training.values+e.props.training.predictions,this.stepWidth=this.plotWidth/this.total),this.heading=new ft(this.s,this.s.cellPlotProps.left+20,this.s.height*this.s.typography.titleOffsetRatio/2,"cellPlot"),this.textPlot=new Wt,this.functionPlot=new Ft)}return Object(k.a)(t,[{key:"draw",value:function(){var t=this.s;"Text Data"===this.s.props.training.inputType?(this.textPlot.drawTextPlot.call(this,t),zt("text",t,this.plotHeight/2)):(this.functionPlot.drawFunctionPlot.call(this,t),zt("function",t,this.plotHeight/2)),this.heading.draw(t.global.strings.headings[4].title)}},{key:"mouseMoved",value:function(t,e){this.heading.mouseMoved(t,e)}},{key:"checkClick",value:function(){return this.heading.checkClick()}}]),t}();var Rt=function(t){t.props={},t.network=[],t.lossValues=[],t.constants={},t.scaleImage=5,t.detail=!1,t.transition=0,t.transitionSpeed=7,t.clickedBlock=void 0,t.lstmAnim=!0,t.currfps=0,t.sideRatioLeft=.1,t.sideRatioLoss=.1,t.sideRatioRight=.3,t.detailRatio=.5,t.ctrRatio=.5,t.globalScale=1,t.ready=!1,t.setupDone=!1,t.netAnim={},t.mx=0,t.my=0,t.cellAnim={maxSteps:11,maxErrorSteps:20,maxBackSteps:62,step:0,frame:0,inputStep:0,predictionStep:0,errorStep:0,backStep:0,forward:!0,error:!1,back:!1},t.typography={fontsize:16,fontsizelarge:20,fontsizesmall:12,tooltipoffset:60,titleOffsetRatio:.1},t.colors=function(t){return{white:t.color(255),grey:t.color(v.palette.secondary.main),lightgrey:t.color(v.palette.secondary.light),darkgrey:t.color(v.palette.secondary.dark),black:t.color(0),bluegrey:t.color(v.palette.primary.main),lightbluegrey:t.color(v.palette.primary.light),darkbluegrey:t.color(v.palette.primary.dark),red:t.color(255,50,50),overview:t.color(v.palette.overview.main),overviewlight:t.color(v.palette.overview.light),overviewdark:t.color(v.palette.overview.dark),detail:t.color(v.palette.detail.main),detaillight:t.color(v.palette.detail.light),detaildark:t.color(v.palette.detail.dark)}}(t),t.setup=function(){var e=document.getElementById("networkDiv"),i=document.getElementById("valueDiv"),a=document.getElementById("appDiv"),s=document.getElementById("barDiv");t.cnv=t.createCanvas(e.offsetWidth,a.offsetHeight-i.offsetHeight-s.offsetHeight),t.initialize(),t.cnv.mouseClicked(t.click),t.cnv.mouseMoved(t.move),t.updateMemory()},t.initialize=function(){t.frameRate(60),t.textAlign(t.CENTER,t.BOTTOM),t.textSize(t.typography.fontsize),t.sideWidthLeft=t.sideRatioLeft*t.width,t.sideWidthRight=t.sideRatioRight*t.width,t.inProps={left:0,right:t.sideRatioLeft*t.width,width:t.sideRatioLeft*t.width,midX:t.sideRatioLeft*t.width/2,midY:t.height/2,height:t.height},t.netProps={left:t.inProps.right,right:t.inProps.right+t.width*t.ctrRatio,midX:t.sideWidthLeft+t.width*t.ctrRatio*.5,midY:t.height/2,width:t.width*t.ctrRatio,height:t.height},t.outProps={left:t.netProps.right,right:t.width,midX:t.netProps.right+(t.width-t.netProps.right)/2,midY:t.height/2,width:t.sideRatioRight*t.width,height:t.height,verRatio:.6,horRatio:.9},t.lossProps={left:t.netProps.right,right:t.netProps.right+t.width*t.sideRatioLoss,midX:t.sideWidthLeft+t.width*t.ctrRatio*.5,midY:t.height/2,width:t.width*t.sideRatioLoss,height:t.height},t.detailProps={left:0,right:t.width*t.detailRatio,midX:t.detailRatio*t.width/2,midY:t.height/2,width:t.width*t.detailRatio,height:t.height,verRatio:.7,horRatio:.55},t.cellPlotProps={left:t.detailProps.right,right:t.width,midX:t.width-t.width*(1-t.detailRatio)/2,midY:t.height/2,width:t.width*(1-t.detailRatio),height:t.height,verRatio:.6,horRatio:.7},t.net=new At(t),t.cell=new vt(t),t.input=new Nt(t),t.cellPlot=new Mt(t),t.outputPlot=new Ct(t),t.pause=0,t.netFrame=0,t.netAnim=!1,t.netPredFrames=100,t.netLossFrames=50,t.netTrainFrames=100,t.MAX_NET_FRAMES=t.netPredFrames+t.netLossFrames+t.netTrainFrames,t.plotFrame=0,t.plotAnim=!1,t.plotMoveFrames=100,t.plotScanFrames=50,t.plotStayFrames=110,t.netPause=t.plotMoveFrames/(t.props.network.layers+2),t.MAX_PLOT_FRAMES=t.plotMoveFrames+t.plotScanFrames+t.plotStayFrames,t.imageMode(t.CENTER),t.rectMode(t.CENTER),t.setupDone=!0},t.draw=function(){t.background(t.colors.white),t.cursor(t.ARROW),t.fill(0),t.props&&(t.pause=Math.round(10/t.props.ui.detailSpeed),t.detail&&t.props.ui.anim&&t.cell.update(!1),t.drawPlots(),t.drawInput(),t.drawNetwork(),t.drawCell(),t.drawCellPlot())},t.preload=function(){t.receive=t.loadImage("./data/rec_black.png"),t.add=t.loadImage("./data/input_black.png"),t.save=t.loadImage("./data/rec_black.png"),t.forget=t.loadImage("./data/del_black.png"),t.cellImage=t.loadImage("./data/save_black.png"),t.output=t.loadImage("./data/output_black.png")},t.updateMemory=function(e){if(t.ready=void 0!==t.props&&t.setupDone,t.ready){if(t.props.training.running)t.detail=!1,t.cell.reset();else{t.network=[],t.network.push({size:1,type:"input"});for(var i=0;i<t.props.network.layers;i++)t.network.push({size:t.props.network.layerSize,type:"hidden"});t.network.push({size:1,type:"output"}),t.props.ui.animStep&&(t.props=Object(A.a)({},t.props,{ui:Object(A.a)({},t.props.ui,{animStep:!1})}),t.cell.update(!0)),t.props.training.step&&(t.cellAnim={maxSteps:11,maxErrorSteps:20,maxBackSteps:62,frame:0,step:0,inputStep:0,predictionStep:0,errorStep:0,backStep:0,forward:!0,error:!1,back:!1}),t.netAnim||(t.net=new At(t))}if(t.props.ui.detail!==t.detail&&(t.detail=t.props.ui.detail),e){t.plotFrame=0,t.plotAnim=!0,t.netFrame=0,t.netAnim=!0,t.lossValues=[];var a=t.props.ui.data[2].prediction,s=t.props.ui.data[2].chartOutput;if(a)for(var n=0;n<a.length;n++)t.lossValues.push(a[n]-s[n]);t.net.start(),t.props.actions.updateUI(Object(A.a)({},t.props.ui,{netAnim:!0}))}t.global=t.constants[t.props.appState.language];for(var r=0;r<t.props.ui.trigger.length;r++)if(t.props.ui.trigger[r]){0===r?(t.cellAnim.forward=!0,t.cell.reset()):1===r?(t.cellAnim.error=!0,t.cell.prepareError()):(t.cellAnim.back=!0,t.cell.prepareBackprop()),t.props.actions.updateUI(Object(A.a)({},t.props.ui,{state:[t.cellAnim.forward,t.cellAnim.error,t.cellAnim.back],trigger:[!1,!1,!1]}));break}t.props.appState.cellDialog.includes(!0)||t.move()}},t.reset=function(){t.plotFrame=0,t.plotAnim=!1,t.netFrame=0,t.netAnim=!1,t.lossValues=[],t.cellAnim={maxSteps:11,maxErrorSteps:20,maxBackSteps:62,step:0,frame:0,inputStep:0,predictionStep:0,errorStep:0,backStep:0,forward:!0,error:!1,back:!1},t.initialize()},t.windowResized=function(){var e=document.getElementById("networkDiv"),i=document.getElementById("valueDiv");t.resizeCanvas(e.offsetWidth,window.innerHeight-i.offsetHeight-50),t.props.ui.ready||t.props.actions.updateTraining(Object(A.a)({},t.props.training,{step:!0})),t.initialize()},t.drawInput=function(){t.noStroke(),t.fill(t.colors.white),t.rect(t.inLeft+t.sideWidthLeft/2,t.height/2,t.sideWidthLeft,t.height),t.input.draw()},t.drawLoss=function(){t.noStroke(),t.loss.draw()},t.drawPlots=function(){t.push();var e=t.outProps.midX,i=t.outProps.midY;t.netScale=(100+t.transition)/100;var a=e+(e-t.cellPlotProps.midX)*(t.transition/100),s=i+(i-t.cellPlotProps.midY)*(t.transition/100);t.translate(a,s),t.scale(t.netScale),t.translate(-a,-s),t.noStroke(),t.fill(t.colors.white),t.rect(t.outLeft+t.sideWidthRight/2,t.height/2,t.sideWidthRight,t.height),t.outputPlot.draw(),t.plotAnim&&t.props.training.running&&(t.plotFrame++,t.plotFrame>t.MAX_PLOT_FRAMES&&(t.plotAnim=!1,t.plotFrame=0,t.props.actions.updateUI(Object(A.a)({},t.props.ui,{running:!1,ready:!0})))),t.pop()},t.drawCell=function(){t.colors.white.setAlpha(t.cellAlpha),t.fill(t.colors.white),t.noStroke(),t.rect(t.width/2,t.height/2,t.width,t.height),t.detail?t.transition<100&&(t.transition+=t.transitionSpeed):t.transition>0&&(t.transition-=t.transitionSpeed),t.push();var e=t.clickedBlock;if(e||(e=t.net.layers[1]),e){var i=e.x+(e.x-t.detailProps.midX)*(t.transition/100),a=e.y+(e.y-t.detailProps.midY)*(t.transition/100);t.translate(i,a)}if(t.scale(t.transition>=100?1:t.transition/100),e){var s=e.x+(e.x-t.detailProps.midX)*(t.transition/100),n=e.y+(e.y-t.detailProps.midY)*(t.transition/100);t.translate(-s,-n)}t.cellAlpha=255*t.transition/100,t.cell.draw(),t.pop(),t.colors.white.setAlpha(255)},t.drawCellPlot=function(){t.push();var e=t.outProps.midX,i=t.outProps.midY,a=e+(e-t.cellPlotProps.midX)*(t.transition/100),s=i+(i-t.cellPlotProps.midY)*(t.transition/100);t.translate(a,s),t.scale(t.transition>=100?1:t.transition/100),t.translate(-a,-s),t.cellPlot.draw(),t.pop()},t.drawNetwork=function(){t.push();var e=t.clickedBlock;if(t.netScale=(100+t.transition)/100,e){var i=e.x+(e.x-t.detailProps.midX)*(t.transition/100),a=e.y+(e.y-t.detailProps.midY)*(t.transition/100);t.translate(i,a)}if(t.scale(t.netScale),e){var s=e.x+(e.x-t.detailProps.midX)*(t.transition/100),n=e.y+(e.y-t.detailProps.midY)*(t.transition/100);t.translate(-s,-n)}var r=0;t.netAnim&&t.props.training.running&&(t.netFrame++,t.netFrame>t.MAX_NET_FRAMES&&(t.netAnim=!1,t.netFrame=0)),r=t.netFrame<t.netPredFrames?1:t.netFrame<t.netLossFrames+t.netPredFrames?2:3,!t.props.training.running||r===t.props.ui.trainingStep&&t.netAnim===t.props.ui.netAnim||t.props.actions.updateUI(Object(A.a)({},t.props.ui,{trainingStep:r,netAnim:t.netAnim})),t.net.draw(),t.pop()},t.move=function(){t.ready&&(t.props.ui.help||(t.mx=t.mouseX,t.my=t.mouseY,t.detail?(t.cell.mouseMoved(t.mx,t.my),t.cellPlot.mouseMoved(t.mx,t.my)):(t.net.mouseMoved(t.mx,t.my),t.input&&t.input.mouseMoved(t.mx,t.my),t.outputPlot.mouseMoved(t.mx,t.my))))},t.click=function(){if(t.ready&&!t.props.ui.help){if(t.mx<0||t.my<0||t.mx>t.width||t.my>t.height)return;t.detail?(t.detail=t.cell.checkClick(),t.detail=t.cellPlot.checkClick()||t.detail,t.detail||(t.props.actions.updateUI(Object(A.a)({},t.props.ui,{detail:!1})),t.props.actions.updateTraining(Object(A.a)({},t.props.training,{running:t.props.ui.anim})))):(t.net.checkClick(),t.input.checkClick(),t.net.mouseMoved(t.mx,t.my),t.outputPlot.checkClick())}}},_t=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;return Object(x.a)(this,i),(t=e.call(this)).networkSketch=new window.p5(Rt,"networkDiv"),t}return Object(k.a)(i,[{key:"componentDidMount",value:function(){this.networkSketch.props=this.props,this.networkSketch.constants=J,this.networkSketch.updateMemory(!1)}},{key:"componentDidUpdate",value:function(t){this.networkSketch.props=this.props,this.networkSketch.updateMemory(t.ui.running!==this.props.ui.running&&this.props.ui.running),this.props.ui.reset&&(this.networkSketch.reset(),this.props.actions.updateUI(Object(A.a)({},this.props.ui,{reset:!1})))}},{key:"componentWillUnmount",value:function(){this.networkSketch.remove()}},{key:"render",value:function(){return n.a.createElement(E.a,{container:!0,direction:"row",justify:"space-between"},n.a.createElement(E.a,{item:!0,xs:12},n.a.createElement("div",{id:"networkDiv",style:{fontSize:"0"}})),n.a.createElement(ct,null),n.a.createElement(dt,null))}}]),i}(n.a.Component);var Lt=Object(l.b)((function(t,e){return{network:t.network,training:t.training,ui:t.ui,appState:t.appState,textData:t.textData,cookiesState:t.cookiesState}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Object(I.a)(_)(_t)),Ht=i(169),Bt=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).handleClose=function(){t.props.actions.updateAppState(Object(A.a)({},t.props.appState,{inputDialog:[!1,!1,!1]}))},t}return Object(k.a)(i,[{key:"onClick",value:function(t){var e=this.props.appState.inputDialog;e[t]=!e[t],this.props.actions.updateAppState(Object(A.a)({},this.props.appState,{inputDialog:e}))}},{key:"getClass",value:function(t){return this.props.ui.detail?this.props.ui.state[t]?this.props.classes.typoCv:this.props.classes.typoCvOff:this.props.ui.ready||this.props.ui.trainingStep!==t+1?this.props.classes.typoOvOff:this.props.classes.typoOv}},{key:"render",value:function(){var t=this,e=J[this.props.appState.language];return s.createElement(E.a,{item:!0,xs:!0,id:"inppan",className:this.props.classes.smallPanelWrapper},s.createElement(E.a,{container:!0,style:{height:"100%"},direcion:"column",justify:"space-between",alignItems:"center"},e.strings.trainSteps.map((function(e){return s.createElement(E.a,{item:!0,key:e.id,className:t.props.classes.fullWidth},s.createElement(E.a,{item:!0},s.createElement(tt.a,{align:"left"},s.createElement(Ht.a,{className:t.getClass(e.id),href:"#",onClick:function(i){return t.onClick(e.id)}},e.title))),s.createElement(E.a,{item:!0},s.createElement(tt.a,{variant:"body1",className:t.props.classes.typoStd,align:"left"},e.description)),s.createElement(pt,{closeFunction:t.handleClose,open:t.props.appState.inputDialog[e.id],title:e.title,description:e.longDescription}))}))))}}]),i}(s.Component);var Gt=Object(l.b)((function(t){return{training:t.training,network:t.network,ui:t.ui,appState:t.appState}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Object(I.a)(_)(Bt)),Ut=i(170),Xt=i(88),Yt=i.n(Xt),qt=i(87),Vt=i.n(qt),Kt=i(86),Jt=i.n(Kt),Qt=i(91),$t=i.n(Qt),Zt=i(90),te=i.n(Zt),ee=i(89),ie=i.n(ee);var ae=Object(I.a)(_)((function(t){var e=t.classes,i=t.properties,a=t.icon,n=t.action,r=t.disabled;return s.createElement(Ut.a,{disabled:r,variant:"outlined",className:i.ui.detail?e.button_cell:e.button_net,onClick:n},a)})),se=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).toggleTraining=function(){t.props.ui.detail?t.props.actions.updateUI(Object(A.a)({},t.props.ui,{anim:!t.props.ui.anim})):(t.props.actions.toggleTraining(t.props.training),"startTraining"===t.props.cookiesState.intro&&St(t.props.cookiesState.intro,t.props.cookiesState,t.props.actions.updateCookiesState))},t.resetButtonPressed=function(){t.props.actions.updateTraining(Object(A.a)({},t.props.training,{reset:!0}))},t.nextStep=function(){t.props.ui.detail?t.props.actions.updateUI(Object(A.a)({},t.props.ui,{animStep:!0})):t.props.actions.updateTraining(Object(A.a)({},t.props.training,{step:!0}))},t.plusButtonPressed=function(){var e=2*t.props.ui.detailSpeed;t.props.actions.updateUI(Object(A.a)({},t.props.ui,{detailSpeed:e}))},t.minusButtonPressed=function(){var e=t.props.ui.detailSpeed/2;t.props.actions.updateUI(Object(A.a)({},t.props.ui,{detailSpeed:e}))},t.handleClose=function(){t.props.actions.updateAppState(Object(A.a)({},t.props.appState,{epochDialog:!1}))},t}return Object(k.a)(i,[{key:"onClick",value:function(){var t=this.props.appState.epochDialog;t=!t,this.props.actions.updateAppState(Object(A.a)({},this.props.appState,{epochDialog:t}))}},{key:"render",value:function(){var t=this,e=this.props.classes,i=J[this.props.appState.language];return s.createElement(E.a,{className:this.props.classes.panelWrapper,item:!0,xs:2},s.createElement(E.a,{container:!0,style:{height:"100%"},justify:"center",alignItems:"center"},s.createElement(E.a,{container:!0,justify:"center"},s.createElement(E.a,{container:!0,item:!0,justify:"center",alignItems:"center"},s.createElement(E.a,{item:!0},s.createElement(ae,{disabled:this.props.ui.detail||!this.props.training.workerReady,properties:this.props,action:this.resetButtonPressed,icon:s.createElement(Jt.a,{fontSize:"small",style:{color:"white"}})})),s.createElement(E.a,{item:!0},s.createElement(ae,{properties:this.props,disabled:!this.props.training.workerReady&&!this.props.ui.netAnim,action:this.toggleTraining,icon:this.props.ui.detail&&this.props.ui.anim||!this.props.ui.detail&&this.props.training.running?s.createElement(Vt.a,{fontSize:"large",style:{color:"white"}}):s.createElement(Yt.a,{fontSize:"large",style:{color:"white"}})})),s.createElement(E.a,{item:!0},s.createElement(ae,{properties:this.props,disabled:this.props.ui.detail&&this.props.ui.anim||!this.props.ui.detail&&this.props.training.running||!this.props.training.workerReady,action:this.nextStep,icon:s.createElement(ie.a,{fontSize:"small",style:{color:"white"}})}))),this.props.ui.detail?s.createElement(E.a,{container:!0,item:!0,justify:"center",alignItems:"center"},s.createElement(E.a,{item:!0},s.createElement(Ut.a,{size:"small",variant:"outlined",disabled:this.props.ui.detailSpeed<1,style:null,className:this.props.classes.button_cell,onClick:function(){return t.minusButtonPressed()}},s.createElement(te.a,{fontSize:"small",style:{color:"white"}}))),s.createElement(E.a,{item:!0},s.createElement(tt.a,{className:this.props.classes.typoStd},this.props.ui.detailSpeed+"x")),s.createElement(E.a,{item:!0},s.createElement(Ut.a,{size:"small",variant:"outlined",disabled:this.props.ui.detailSpeed>4,style:null,className:this.props.classes.button_cell,onClick:function(){return t.plusButtonPressed()}},s.createElement($t.a,{fontSize:"small",style:{color:"white"}})))):null,s.createElement(E.a,{container:!0,item:!0,xs:12,alignItems:"center",direction:"column"},s.createElement(E.a,{item:!0},s.createElement(tt.a,null,s.createElement(Ht.a,{href:"#",className:this.props.ui.detail?e.typoCvBig:e.typoOvBig,onClick:function(){return t.onClick()}},i.strings.epoch.title)),s.createElement(pt,{closeFunction:this.handleClose,open:this.props.appState.epochDialog,title:i.strings.epoch.title,description:i.strings.epoch.description})),s.createElement(E.a,{item:!0},s.createElement(tt.a,{className:this.props.classes.typoStdBig},this.props.network.iteration))))))}}]),i}(s.Component);var ne=Object(l.b)((function(t){return{training:t.training,network:t.network,ui:t.ui,appState:t.appState,cookiesState:t.cookiesState}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Object(I.a)(_)(se)),re=i(186),oe=i(183),le=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).handleSliderChange=function(e,i){var a=J[t.props.appState.language];switch(e){case a.sliders[0].key:t.props.actions.updateNetwork(Object(A.a)({},t.props.network,{learningRate:Math.pow(10,i)/10}));break;case a.sliders[1].key:t.props.actions.updateTraining(Object(A.a)({},t.props.training,{batchSize:i}));break;case a.sliders[2].key:t.props.actions.updateTraining(Object(A.a)({},t.props.training,{noise:i}))}},t.handleClose=function(){t.props.actions.updateAppState(Object(A.a)({},t.props.appState,{sliderDialog:[!1,!1,!1]}))},t}return Object(k.a)(i,[{key:"onClick",value:function(t){var e=this.props.appState.sliderDialog;e[t]=!e[t],this.props.actions.updateAppState(Object(A.a)({},this.props.appState,{sliderDialog:e}))}},{key:"getFormattedValue",value:function(t){var e=Math.pow(10,t)/10,i=Math.floor(t);return e.toFixed(Math.abs(i-2))}},{key:"render",value:function(){var t,e=this,i=J[this.props.appState.language],a=[],n=Object(gt.a)(i.sliders);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.title===i.sliders[2].title&&"Text Data"===this.props.training.inputType||a.push(r)}}catch(o){n.e(o)}finally{n.f()}return s.createElement(E.a,{item:!0,xs:!0,className:this.props.classes.smallPanelWrapper},s.createElement(E.a,{container:!0,style:{height:"100%"},direcion:"column",justify:"space-between",alignItems:"center"},a.map((function(t){return s.createElement(E.a,{item:!0,key:t.key,className:e.props.classes.fullWidth},s.createElement(tt.a,{align:"left"},s.createElement(Ht.a,{href:"#",onClick:function(){return e.onClick(t.key)},className:e.props.ui.detail?e.props.classes.typoCv:e.props.training.running?e.props.classes.typoOvOff:e.props.classes.typoOv},t.title)),s.createElement(pt,{closeFunction:e.handleClose,open:e.props.appState.sliderDialog[t.key],title:t.title,description:t.description}),s.createElement(re.a,{className:e.props.classes.defSlider,marks:t.marks,disabled:e.props.training.running,value:0===t.key?Math.log10(10*e.props.network.learningRate):1===t.key?e.props.training.batchSize:e.props.training.noise,valueLabelDisplay:"auto",valueLabelFormat:function(i){return 0===t.key?e.getFormattedValue(i):i},ValueLabelComponent:pe,step:t.step,min:t.min,max:t.max,onChange:function(i,a){return e.handleSliderChange(t.key,a)}}))}))))}}]),i}(s.Component);function pe(t){var e=t.children,i=t.open,a=t.value,n=s.useRef(null);return s.useEffect((function(){n.current&&n.current.update()})),s.createElement(he,{PopperProps:{popperRef:n},open:i,enterTouchDelay:0,placement:"top",title:a},e)}var he=Object(I.a)((function(t){return{tooltip:{backgroundColor:t.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:t.shadows[1],fontSize:11}}}))(oe.a);var ce=Object(l.b)((function(t){return{training:t.training,network:t.network,ui:t.ui,appState:t.appState}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Object(I.a)(_)(le)),ue=i(93),de=i.n(ue),ge=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).handleClose=function(){t.props.actions.updateAppState(Object(A.a)({},t.props.appState,{stepDialog:[!1,!1,!1,!1]}))},t}return Object(k.a)(i,[{key:"onClick",value:function(t){var e=this.props.appState.stepDialog;e[t]=!e[t],this.props.actions.updateAppState(Object(A.a)({},this.props.appState,{stepDialog:e}))}},{key:"render",value:function(){var t=this;return s.createElement(E.a,{item:!0},s.createElement(tt.a,{align:"left"},s.createElement(Ht.a,{className:this.props.step.id===this.props.ui.lstmStep&&this.props.ui.state[0]?this.props.classes.typoCvSmall:this.props.classes.typoCvOffSmall,href:"#",onClick:function(e){return t.onClick(t.props.step.id)}},this.props.step.id+1+" "+this.props.step.title)),s.createElement(pt,{closeFunction:this.handleClose,open:this.props.appState.stepDialog[this.props.step.id],title:this.props.step.title,description:this.props.step.longDescription}))}}]),i}(s.Component);var fe=Object(l.b)((function(t){return{training:t.training,network:t.network,ui:t.ui,appState:t.appState}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Object(I.a)(_)(ge)),ye=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).handleClose=function(){t.props.actions.updateAppState(Object(A.a)({},t.props.appState,{inputDialog:[!1,!1,!1]}))},t}return Object(k.a)(i,[{key:"onClick",value:function(t){var e=this.props.appState.inputDialog;e[t]=!e[t],this.props.actions.updateAppState(Object(A.a)({},this.props.appState,{inputDialog:e}))}},{key:"onJump",value:function(t){var e=[!1,!1,!1];e[t]=!0,this.props.actions.updateUI(Object(A.a)({},this.props.ui,{trigger:e}))}},{key:"getClass",value:function(t){return this.props.ui.detail?this.props.ui.state[t]?this.props.classes.typoCv:this.props.classes.typoCvOff:this.props.ui.ready||this.props.ui.trainingStep!==t+1?this.props.classes.typoOvOff:this.props.classes.typoOv}},{key:"render",value:function(){var t=this,e=J[this.props.appState.language];return s.createElement(E.a,{item:!0,xs:!0,id:"inppan",className:this.props.classes.smallPanelWrapper},s.createElement(E.a,{container:!0,style:{height:"100%"},direcion:"column",justify:"space-between",alignItems:"center"},e.strings.trainSteps.map((function(i){return s.createElement(E.a,{item:!0,key:i.id,className:t.props.classes.fullWidth},s.createElement(E.a,{item:!0},s.createElement(tt.a,{align:"left"},s.createElement(Ht.a,{className:t.getClass(i.id),href:"#",onClick:function(e){return t.onClick(i.id)}},i.title),s.createElement(Ut.a,{size:"small",variant:"outlined",disabled:t.props.ui.state[i.id],style:{marginLeft:"12px"},className:t.props.classes.button_cell,onClick:function(e){return t.onJump(i.id)}},s.createElement(de.a,{fontSize:"small",style:{color:"white"}})))),s.createElement(E.a,{item:!0},s.createElement(tt.a,{variant:"body1",className:t.props.classes.typoStd,align:"left"},i.description)),0===i.id?s.createElement(E.a,{item:!0,container:!0,spacing:3,style:{marginTop:"-5px"}},e.strings.lstmSteps.map((function(t){return s.createElement(fe,{key:t.id,step:t})}))):null,s.createElement(pt,{closeFunction:t.handleClose,open:t.props.appState.inputDialog[i.id],title:i.title,description:i.longDescription}))}))))}}]),i}(s.Component);var me=Object(l.b)((function(t){return{training:t.training,network:t.network,ui:t.ui,appState:t.appState}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Object(I.a)(_)(ye)),ve=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){return Object(x.a)(this,i),e.apply(this,arguments)}return Object(k.a)(i,[{key:"render",value:function(){return s.createElement(E.a,{container:!0,justify:"space-evenly",alignItems:"center",id:"valueDiv",className:"noselect"},this.props.ui.detail?s.createElement(me,null):s.createElement(Gt,null),s.createElement(j.a,{orientation:"vertical",flexItem:!0}),s.createElement(ne,null),s.createElement(j.a,{orientation:"vertical",flexItem:!0}),s.createElement(ce,null))}}]),i}(s.Component);var xe=Object(l.b)((function(t){return{network:t.network,training:t.training,ui:t.ui}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Object(I.a)(_)(ve)),ke=i(94),we=i.n(ke),be=i(184),Se=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).handleClose=function(e,i){"clickaway"!==i&&t.props.actions.updateAlertSnack({open:!1,message:""})},t}return Object(k.a)(i,[{key:"render",value:function(){return n.a.createElement(be.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.props.alertSnack.open,autoHideDuration:3e3,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:n.a.createElement("span",{id:"message-id"},this.props.alertSnack.message),action:[n.a.createElement(Ut.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},n.a.createElement(we.a,null))]})}}]),i}(n.a.Component);var Oe=Object(l.b)((function(t,e){return{alertSnack:t.alertSnack}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Se),Te=i(137),Ae=i(180),Ee=i(173),je=i(97),Ie=i.n(je),Pe=i(98),Ce=i.n(Pe),Ne=i(96),De=i.n(Ne),We=i(95),Fe=i.n(We),ze=i(99),Me=i.n(ze),Re=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).handleNext=function(e){St(kt(),t.props.cookiesState,t.props.actions.updateCookiesState)},t.handleSkip=function(e){wt("skipped");var i=kt();t.props.actions.updateCookiesState(Object(A.a)({},t.props.cookiesState,{intro:i}))},t}return Object(k.a)(i,[{key:"render",value:function(){var t=function(t,e,i,a,s){var n=!1,r=J[i.language].strings,o=r.onboarding.welcome;return""===e.intro?n=!t.detail:"input"===e.intro?(n=!t.detail,o=r.onboarding.input):"network"===e.intro?(n=!t.detail,o=r.onboarding.network):"sliders"===e.intro?(n=!0,o=r.onboarding.sliders):"startTraining"===e.intro?(n=!t.detail,o=r.onboarding.startTraining):"output"===e.intro?(n=!t.detail&&s.iteration>1,o=r.onboarding.output):"cellTransition"===e.intro?(n=!t.detail&&s.iteration>9,o=r.onboarding.cellTransition):"detailOutput"===e.intro?(n=!!t.detail,o=r.onboarding.detailOutput):"detailCell"===e.intro?(n=!!t.detail,o=r.onboarding.detailCell):"detailProcess"===e.intro?(n=!0,o=r.onboarding.detailProcess):"headingExplanation"===e.intro&&(n=!0,o=r.onboarding.headingExplanation),{open:n,state:o}}(this.props.ui,this.props.cookiesState,this.props.appState,this.props.training,this.props.network);return t.open?n.a.createElement(E.a,{container:!0,alignItems:"center",style:t.state.style},"left"===t.state.arrow?n.a.createElement(E.a,{item:!0},n.a.createElement(Fe.a,{style:{color:this.props.ui.detail?v.palette.detail.main:v.palette.overview.main},fontSize:"large"})):null,n.a.createElement(E.a,{container:!0,item:!0,direction:"column",alignItems:"center",style:{width:"500px"}},"up"===t.state.arrow?n.a.createElement(E.a,{item:!0},n.a.createElement(De.a,{style:{color:this.props.ui.detail?v.palette.detail.main:v.palette.overview.main},fontSize:"large"})):null,n.a.createElement(E.a,{item:!0},n.a.createElement(Te.a,{style:{background:(this.props.ui.detail,v.palette.secondary.superLight)}},n.a.createElement(Ae.a,{p:2,style:{width:"500px"}},n.a.createElement(E.a,{container:!0,directiton:"column",spacing:2},n.a.createElement(E.a,{item:!0},n.a.createElement(tt.a,{variant:"h5"},t.state.title)),t.state.description.map((function(t,e){return n.a.createElement(ot,{key:e,descriptionElement:t})})),n.a.createElement(E.a,{item:!0,style:{width:"100%"}},n.a.createElement(E.a,{container:!0,justify:"flex-end"},n.a.createElement(E.a,{item:!0},n.a.createElement(Ee.a,{variant:"contained",className:this.props.ui.detail?this.props.classes.text_button_detail:this.props.classes.text_button_overview,onClick:this.handleSkip},t.state.buttonTitles.skip),n.a.createElement(Ee.a,{variant:"contained",className:this.props.ui.detail?this.props.classes.text_button_cell:this.props.classes.text_button_net,onClick:this.handleNext,endIcon:n.a.createElement(Ie.a,null)},t.state.buttonTitles.next)))))))),"down"===t.state.arrow?n.a.createElement(E.a,{item:!0},n.a.createElement(Ce.a,{style:{color:this.props.ui.detail?v.palette.detail.main:v.palette.overview.main},fontSize:"large"})):null),"right"===t.state.arrow?n.a.createElement(E.a,{item:!0},n.a.createElement(Me.a,{style:{color:this.props.ui.detail?v.palette.detail.main:v.palette.overview.main},fontSize:"large"})):null):null}}]),i}(n.a.Component);var _e=Object(l.b)((function(t,e){return{cookiesState:t.cookiesState,appState:t.appState,training:t.training,network:t.network,ui:t.ui}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Object(I.a)(_)(Re)),Le=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(t){var a;Object(x.a)(this,i),a=e.call(this,t);var s=kt();return void 0!==s&&a.props.actions.updateCookiesState(Object(A.a)({},a.props.cookiesState,{intro:s})),a}return Object(k.a)(i,[{key:"render",value:function(){return n.a.createElement(E.a,{container:!0,className:"mainGrid",style:{height:"100%"}},n.a.createElement(E.a,{item:!0,className:this.props.classes.fullWidth,id:"netArea"},n.a.createElement(V,null),n.a.createElement(Lt,null)),n.a.createElement(E.a,{item:!0,className:this.props.classes.panelWrapper},n.a.createElement(j.a,null),n.a.createElement(xe,null)),n.a.createElement(Oe,null),n.a.createElement(_e,null))}}]),i}(n.a.Component);var He=Object(l.b)((function(t,e){return{network:t.network,cookiesState:t.cookiesState}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Object(I.a)(_)(Le)),Be=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){return Object(x.a)(this,i),e.apply(this,arguments)}return Object(k.a)(i,[{key:"render",value:function(){return s.createElement("div",{className:"wrap"},s.createElement(T.a,null),s.createElement("div",{className:"content",id:"visDiv"},s.createElement(S.a,null,s.createElement("div",{className:"full"},s.createElement(O.a,{exact:!0,path:"",component:He})))))}}]),i}(s.Component),Ge=i(175),Ue=i(185),Xe=i(102),Ye=i.n(Xe),qe=i(105),Ve=i(179);var Ke=Object(I.a)(_)((function(t){var e=t.classes,i=t.main,a=Object(qe.a)(t,["classes","main"]);return s.createElement("div",{style:i?{display:"inline-flex",marginRight:"12px",flexGrow:"1"}:{marginRight:"12px"}},s.createElement(Ve.a,Object.assign({className:e.select,inputProps:{classes:{icon:e.selectIcon},color:"white"}},a)))})),Je=function(t){Object(w.a)(i,t);var e=Object(b.a)(i);function i(){var t;Object(x.a)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).handleKeyDown=function(e){if(t.props){var i=!1;switch(e.key){case" ":if(!t.props.training.workerReady&&!t.props.ui.netAnim)return;t.props.ui.detail?t.props.actions.updateUI(Object(A.a)({},t.props.ui,{anim:!t.props.ui.anim})):t.props.actions.toggleTraining(t.props.training);break;case"Enter":if(t.props.ui.detail&&t.props.ui.anim||!t.props.ui.detail&&t.props.training.running||!t.props.training.workerReady)return;t.props.ui.detail?t.props.actions.updateUI(Object(A.a)({},t.props.ui,{animStep:!0})):t.props.training.running||t.props.actions.updateTraining(Object(A.a)({},t.props.training,{step:!0}));break;case"Backspace":if(t.props.ui.detail||!t.props.training.workerReady)return;t.props.actions.updateTraining(Object(A.a)({},t.props.training,{reset:!0}));break;case"-":!t.props.ui.detail&&!t.props.training.running&&t.props.network.layers>1&&t.props.actions.updateNetwork(Object(A.a)({},t.props.network,{layers:t.props.network.layers-1}));break;case"+":!t.props.ui.detail&&!t.props.training.running&&t.props.network.layers<=6&&t.props.actions.updateNetwork(Object(A.a)({},t.props.network,{layers:t.props.network.layers+1}));break;case"Tab":t.props.ui.detail?(t.props.actions.updateUI(Object(A.a)({},t.props.ui,{detail:!1})),t.props.actions.updateTraining(Object(A.a)({},t.props.training,{running:t.props.ui.anim}))):(t.props.actions.updateUI(Object(A.a)({},t.props.ui,{detail:!0,anim:t.props.training.running})),t.props.actions.stopTraining(t.props.training));break;default:i=!0}i||e.preventDefault()}},t.updateDataTypes=function(e){if(!t.props.ui.detail&&!t.props.training.running){var i=t.props.training.dataTypes,a=[];if(i.includes(e)&&i.length>1){var s,n=Object(gt.a)(i);try{for(n.s();!(s=n.n()).done;){var r=s.value;r!==e&&a.push(r)}}catch(o){n.e(o)}finally{n.f()}}else i.includes(e)&&1===i.length||i.push(e),a=i;t.props.actions.updateTraining(Object(A.a)({},t.props.training,{dataTypes:a}))}},t.inputTypeSelect=function(e){var i="Text Data"===e.target.value?["abab"]:["sin"];t.props.actions.updateTraining(Object(A.a)({},t.props.training,{inputType:e.target.value,reset:!0,dataTypes:i}))},t.resetOnboarding=function(e){bt(),t.props.actions.updateCookiesState(Object(A.a)({},t.props.cookiesState,{intro:""}))},t}return Object(k.a)(i,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var t=this.props.classes,e=J[this.props.appState.language];return s.createElement(Ge.a,{className:this.props.ui.detail?t.cVheader:t.oVheader,id:"barDiv"},s.createElement(T.a,{className:"noselect"},s.createElement(tt.a,{variant:"h3",className:t.typoHeader},e.title),s.createElement(Ke,{value:this.props.training.inputType,onChange:this.inputTypeSelect,main:!0,disabled:this.props.ui.detail},e.inputTypes.map((function(t){return s.createElement(Ue.a,{key:t.name,disabled:t.disabled,value:t.name},t.name)}))),s.createElement(Ee.a,{variant:"contained",className:this.props.ui.detail?this.props.classes.text_button_cell_inverted:this.props.classes.text_button_net_inverted,onClick:this.resetOnboarding,startIcon:s.createElement(Ye.a,null)},"Reset Intro")))}}]),i}(s.Component);var Qe=Object(l.b)((function(t){return{training:t.training,network:t.network,ui:t.ui,appState:t.appState,actions:t.actions,cookiesState:t.cookiesState}}),(function(t){return{actions:Object(p.b)(a,t)}}))(Object(I.a)(_)(Je)),$e={network:{data:{chartIn:[],chartOut:[],chartPred:[]},layerSize:16,layers:3,learningRate:.025,iteration:0,type:"LSTM",activation:"tanh"},training:{running:!1,inputType:"Function Data",dataTypes:["sin"],noise:0,values:0,predictions:0,dataSetSize:100,batchSize:25,stepSize:.2,reset:!1,step:!1,workerReady:!0},ui:{running:!1,ready:!0,detail:!1,data:new Array(5).fill({}),netAnim:!1,anim:!0,animStep:!1,lstmStep:0,trainingStep:0,state:[!0,!1,!1],trigger:[!1,!1,!1],detailSpeed:1},appState:{help:!1,language:"ENG",inputDialog:[!1,!1,!1],sliderDialog:[!1,!1,!1],cellDialog:[!1,!1,!1,!1,!1,!1],stepDialog:[!1,!1,!1,!1],epochDialog:!1,aboutDialog:!1,faqDialog:!1,impressumDialog:!1,headingDialog:""},alertSnack:{open:!1,message:""},textData:{},cookiesState:{intro:""}};var Ze=Object(p.c)({network:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e.network,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_NETWORK":return e.network;default:return t}},training:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e.training,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TOGGLE_TRAINING":return Object(A.a)({},e.training,{running:!e.training.running});case"STOP_TRAINING":return Object(A.a)({},e.training,{running:!1});case"UPDATE_TRAINING":return e.training;default:return t}},ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e.ui,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_UI":return e.ui;default:return t}},appState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e.appState,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_APP_STATE":return e.appState;default:return t}},alertSnack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e.alertSnack,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_ALERT_SNACK":return e.alertSnack;default:return t}},textData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e.textData,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_TEXT_DATA":return e.textData;default:return t}},cookiesState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e.cookiesState,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_COOKIES_STATE":return e.cookiesState;default:return t}}}),ti=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,ei=Object(p.e)(Ze,ti(Object(p.a)(h.a))),ii=function(){return n.a.createElement(u.a,{theme:v},n.a.createElement(l.a,{store:ei},n.a.createElement("div",{className:"full",id:"appDiv"},n.a.createElement(c.a,null),n.a.createElement("header",null,n.a.createElement(Qe,null)),n.a.createElement(Be,null))))},ai=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function si(t){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(t){console.error("Error during service worker registration:",t)}))}i(134);o.a.render(n.a.createElement(ii,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");ai?(!function(t){fetch(t).then((function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):si(t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):si(t)}))}}()}},[[118,1,2]]]);
//# sourceMappingURL=main.2693f871.chunk.js.map